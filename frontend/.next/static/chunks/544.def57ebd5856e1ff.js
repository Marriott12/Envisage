"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[544],{6544:function(e,t,a){a.r(t),a.d(t,{default:function(){return SettingsManagement}});var s=a(7437),l=a(2265),n=a(4829),r=a(5925);let i="http://localhost/Envisage/backend/public/api";function SettingsManagement(){var e;let[t,a]=(0,l.useState)({}),[c,d]=(0,l.useState)(!0),[o,u]=(0,l.useState)("general"),[p,g]=(0,l.useState)({}),fetchSettings=async()=>{try{let e=localStorage.getItem("envisage_auth_token"),t=await n.Z.get("".concat(i,"/admin/settings"),{headers:{Authorization:"Bearer ".concat(e)}});a(t.data.settings)}catch(e){r.toast.error("Failed to load settings")}finally{d(!1)}};(0,l.useEffect)(()=>{fetchSettings()},[]);let handleSaveSettings=async()=>{try{let e=localStorage.getItem("envisage_auth_token"),t=Object.entries(p).map(e=>{let[t,a]=e;return{key:t,value:a}});await n.Z.post("".concat(i,"/admin/settings/batch"),{settings:t},{headers:{Authorization:"Bearer ".concat(e)}}),r.toast.success("Settings updated successfully"),g({}),fetchSettings()}catch(e){r.toast.error("Failed to update settings")}},h=Object.keys(t);return c?(0,s.jsx)("div",{className:"flex justify-center py-8",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"System Settings"}),Object.keys(p).length>0&&(0,s.jsx)("button",{onClick:handleSaveSettings,className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700",children:"Save Changes"})]}),(0,s.jsxs)("div",{className:"flex gap-6",children:[(0,s.jsx)("div",{className:"w-48 bg-white rounded-lg shadow p-4",children:(0,s.jsx)("nav",{className:"space-y-1",children:h.map(e=>(0,s.jsx)("button",{onClick:()=>u(e),className:"w-full text-left px-3 py-2 rounded transition ".concat(o===e?"bg-primary-100 text-primary-700 font-medium":"text-gray-700 hover:bg-gray-100"),children:e.charAt(0).toUpperCase()+e.slice(1)},e))})}),(0,s.jsxs)("div",{className:"flex-1 bg-white rounded-lg shadow p-6",children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 capitalize",children:[o," Settings"]}),(0,s.jsx)("div",{className:"space-y-4",children:null===(e=t[o])||void 0===e?void 0:e.map(e=>{var t,a,l;return(0,s.jsxs)("div",{className:"border-b pb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e.key.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase())}),e.description&&(0,s.jsx)("p",{className:"text-xs text-gray-500 mb-2",children:e.description}),"boolean"===e.type?(0,s.jsxs)("select",{value:null!==(t=p[e.key])&&void 0!==t?t:e.value,onChange:t=>g({...p,[e.key]:t.target.value}),className:"w-full border rounded px-3 py-2",children:[(0,s.jsx)("option",{value:"true",children:"Enabled"}),(0,s.jsx)("option",{value:"false",children:"Disabled"})]}):"password"===e.type?(0,s.jsx)("input",{type:"password",value:null!==(a=p[e.key])&&void 0!==a?a:e.value,onChange:t=>g({...p,[e.key]:t.target.value}),className:"w-full border rounded px-3 py-2",placeholder:"Enter value"}):(0,s.jsx)("input",{type:"number"===e.type?"number":"text",value:null!==(l=p[e.key])&&void 0!==l?l:e.value,onChange:t=>g({...p,[e.key]:t.target.value}),className:"w-full border rounded px-3 py-2"}),(0,s.jsxs)("div",{className:"mt-1 flex items-center gap-2 text-xs text-gray-500",children:[(0,s.jsx)("span",{className:"px-2 py-0.5 rounded ".concat(e.is_public?"bg-green-100 text-green-700":"bg-gray-100"),children:e.is_public?"Public":"Private"}),(0,s.jsxs)("span",{children:["Type: ",e.type]})]})]},e.key)})})]})]})]})}}}]);