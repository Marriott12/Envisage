(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[688],{3145:function(e,s,t){Promise.resolve().then(t.bind(t,9815))},9815:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return ListingDetailPage}});var a=t(7437),i=t(2265),r=t(4033),n=t(6691),l=t.n(n),c=t(1396),d=t.n(c),o=t(5925),m=t(13),x=t(927),h=t(1447),p=t(3753),g=t(1122),u=t(2469),j=t(4164),y=t(1809),f=t(260),b=t(6263),N=t(2929),v=t(2938),_=t(1218),w=t(1628),k=t(9843),C=t(2516),S=t(4962),P=t(9805),F=t(3097),L=t(732),Z=t(1865),T=t(1733),q=t(6689),E=t(8265);let O=[{value:"stripe",label:"Credit/Debit Card",icon:T.Z},{value:"flutterwave",label:"Bank Transfer & Mobile Money",icon:T.Z}];function CheckoutModal(e){var s;let{isOpen:t,onClose:r,listing:n,onOrderSuccess:l}=e,[c,d]=(0,i.useState)(!1),[m,x]=(0,i.useState)(1),{user:h}=(0,S.tN)(),{register:p,handleSubmit:g,watch:u,reset:j,formState:{errors:y,isValid:f}}=(0,Z.cI)({mode:"onChange",defaultValues:{shipping_name:(null==h?void 0:h.name)||"",shipping_country:"United States",billing_same_as_shipping:!0,payment_method:"stripe",agree_to_terms:!1}}),N=u("billing_same_as_shipping"),_=u(),C=n.price,B=C+0+0,onSubmit=async e=>{if(!h){o.toast.error("Please login to continue");return}d(!0);try{let s={shipping_address:{name:e.shipping_name,address_line_1:e.shipping_address_line_1,address_line_2:e.shipping_address_line_2||"",city:e.shipping_city,state:e.shipping_state,postal_code:e.shipping_postal_code,country:e.shipping_country,phone:e.shipping_phone},payment_method:e.payment_method,notes:e.notes||""};e.billing_same_as_shipping||(s.billing_address={name:e.billing_name||"",address_line_1:e.billing_address_line_1||"",address_line_2:e.billing_address_line_2||"",city:e.billing_city||"",state:e.billing_state||"",postal_code:e.billing_postal_code||"",country:e.billing_country||""});let t=await k.BG.buyListing(n.id,s);if("success"===t.status)o.toast.success("Order placed successfully!"),l(t.data.order_id,t.data.payment_url),j(),r();else throw Error(t.message||"Failed to place order")}catch(e){console.error("Order creation error:",e),o.toast.error(e.message||"Failed to place order. Please try again.")}finally{d(!1)}},handleClose=()=>{c||(j(),x(1),r())};return(0,a.jsx)(P.u,{appear:!0,show:t,as:i.Fragment,children:(0,a.jsxs)(F.V,{as:"div",className:"relative z-50",onClose:handleClose,children:[(0,a.jsx)(P.u.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,a.jsx)("div",{className:"fixed inset-0 bg-black/25 backdrop-blur-sm"})}),(0,a.jsx)("div",{className:"fixed inset-0 overflow-y-auto",children:(0,a.jsx)("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:(0,a.jsx)(P.u.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,a.jsx)(F.V.Panel,{className:"w-full max-w-4xl transform overflow-hidden rounded-2xl bg-white text-left align-middle shadow-xl transition-all",children:(0,a.jsxs)("form",{onSubmit:g(onSubmit),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(F.V.Title,{as:"h3",className:"text-lg font-semibold text-gray-900",children:"Complete Your Purchase"}),(0,a.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["Step ",m," of 3"]})]}),(0,a.jsx)("button",{type:"button",onClick:handleClose,disabled:c,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,a.jsx)(q.Z,{className:"h-6 w-6"})})]}),(0,a.jsx)("div",{className:"px-6 py-3 bg-gray-50",children:(0,a.jsx)("div",{className:"flex items-center",children:[1,2,3].map(e=>(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex items-center justify-center w-8 h-8 rounded-full text-sm font-medium ".concat(m>=e?"bg-primary-600 text-white":"bg-gray-200 text-gray-600"),children:e}),(0,a.jsxs)("div",{className:"text-sm ml-2 ".concat(m>=e?"text-primary-600":"text-gray-500"),children:[1===e&&"Shipping",2===e&&"Payment",3===e&&"Review"]}),e<3&&(0,a.jsx)("div",{className:"h-0.5 w-16 mx-4 ".concat(m>e?"bg-primary-600":"bg-gray-200")})]},e))})}),(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsxs)("div",{className:"flex-1 p-6",children:[1===m&&(0,a.jsxs)(L.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,a.jsx)(E.Z,{className:"h-5 w-5 text-primary-600"}),(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:"Shipping Information"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name *"}),(0,a.jsx)("input",{...p("shipping_name",{required:"Full name is required"}),className:"input-field",placeholder:"Enter your full name"}),y.shipping_name&&(0,a.jsx)("p",{className:"text-red-600 text-sm mt-1",children:y.shipping_name.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number *"}),(0,a.jsx)("input",{...p("shipping_phone",{required:"Phone number is required",pattern:{value:/^[+]?[\d\s\-\(\)]{10,}$/,message:"Invalid phone number"}}),className:"input-field",placeholder:"+1 (555) 123-4567"}),y.shipping_phone&&(0,a.jsx)("p",{className:"text-red-600 text-sm mt-1",children:y.shipping_phone.message})]}),(0,a.jsxs)("div",{className:"md:col-span-2",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address Line 1 *"}),(0,a.jsx)("input",{...p("shipping_address_line_1",{required:"Address is required"}),className:"input-field",placeholder:"Street address, P.O. box, company name"}),y.shipping_address_line_1&&(0,a.jsx)("p",{className:"text-red-600 text-sm mt-1",children:y.shipping_address_line_1.message})]}),(0,a.jsxs)("div",{className:"md:col-span-2",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address Line 2"}),(0,a.jsx)("input",{...p("shipping_address_line_2"),className:"input-field",placeholder:"Apartment, suite, unit, building, floor, etc."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City *"}),(0,a.jsx)("input",{...p("shipping_city",{required:"City is required"}),className:"input-field",placeholder:"Enter city"}),y.shipping_city&&(0,a.jsx)("p",{className:"text-red-600 text-sm mt-1",children:y.shipping_city.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State/Province *"}),(0,a.jsx)("input",{...p("shipping_state",{required:"State is required"}),className:"input-field",placeholder:"Enter state/province"}),y.shipping_state&&(0,a.jsx)("p",{className:"text-red-600 text-sm mt-1",children:y.shipping_state.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Postal Code *"}),(0,a.jsx)("input",{...p("shipping_postal_code",{required:"Postal code is required"}),className:"input-field",placeholder:"Enter postal code"}),y.shipping_postal_code&&(0,a.jsx)("p",{className:"text-red-600 text-sm mt-1",children:y.shipping_postal_code.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Country *"}),(0,a.jsxs)("select",{...p("shipping_country",{required:"Country is required"}),className:"input-field",children:[(0,a.jsx)("option",{value:"United States",children:"United States"}),(0,a.jsx)("option",{value:"Canada",children:"Canada"}),(0,a.jsx)("option",{value:"United Kingdom",children:"United Kingdom"}),(0,a.jsx)("option",{value:"Nigeria",children:"Nigeria"}),(0,a.jsx)("option",{value:"Kenya",children:"Kenya"}),(0,a.jsx)("option",{value:"South Africa",children:"South Africa"}),(0,a.jsx)("option",{value:"Other",children:"Other"})]}),y.shipping_country&&(0,a.jsx)("p",{className:"text-red-600 text-sm mt-1",children:y.shipping_country.message})]})]})]}),2===m&&(0,a.jsxs)(L.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,a.jsx)(T.Z,{className:"h-5 w-5 text-primary-600"}),(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:"Payment Method"})]}),(0,a.jsx)("div",{className:"space-y-4",children:O.map(e=>(0,a.jsxs)("label",{className:"flex items-center p-4 border rounded-lg cursor-pointer transition-colors ".concat(_.payment_method===e.value?"border-primary-500 bg-primary-50":"border-gray-300 hover:border-gray-400"),children:[(0,a.jsx)("input",{type:"radio",...p("payment_method",{required:"Payment method is required"}),value:e.value,className:"sr-only"}),(0,a.jsx)(e.icon,{className:"h-6 w-6 text-gray-400 mr-3"}),(0,a.jsx)("span",{className:"font-medium text-gray-900",children:e.label})]},e.value))}),(0,a.jsxs)("div",{className:"mt-6",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",...p("billing_same_as_shipping"),className:"rounded border-gray-300 text-primary-600 shadow-sm focus:border-primary-500 focus:ring-primary-500"}),(0,a.jsx)("label",{className:"ml-2 text-sm text-gray-900",children:"Billing address same as shipping"})]}),!N&&(0,a.jsxs)("div",{className:"mt-4 p-4 border rounded-lg bg-gray-50",children:[(0,a.jsx)("h5",{className:"font-medium text-gray-900 mb-4",children:"Billing Address"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name *"}),(0,a.jsx)("input",{...p("billing_name",{required:!N&&"Billing name is required"}),className:"input-field",placeholder:"Enter billing name"})]})})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Order Notes (Optional)"}),(0,a.jsx)("textarea",{...p("notes"),rows:3,className:"input-field",placeholder:"Any special instructions or notes for the seller..."})]})]}),3===m&&(0,a.jsxs)(L.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,a.jsx)(v.Z,{className:"h-5 w-5 text-primary-600"}),(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:"Review Your Order"})]}),(0,a.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(b.Z,{className:"h-4 w-4 text-gray-500"}),(0,a.jsx)("span",{className:"font-medium text-gray-900",children:"Shipping Address"})]}),(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,a.jsx)("p",{children:_.shipping_name}),(0,a.jsx)("p",{children:_.shipping_address_line_1}),_.shipping_address_line_2&&(0,a.jsx)("p",{children:_.shipping_address_line_2}),(0,a.jsxs)("p",{children:[_.shipping_city,", ",_.shipping_state," ",_.shipping_postal_code]}),(0,a.jsx)("p",{children:_.shipping_country}),(0,a.jsxs)("p",{children:["Phone: ",_.shipping_phone]})]})]}),(0,a.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(T.Z,{className:"h-4 w-4 text-gray-500"}),(0,a.jsx)("span",{className:"font-medium text-gray-900",children:"Payment Method"})]}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:null===(s=O.find(e=>e.value===_.payment_method))||void 0===s?void 0:s.label})]}),(0,a.jsxs)("div",{className:"flex items-start",children:[(0,a.jsx)("input",{type:"checkbox",...p("agree_to_terms",{required:"You must agree to the terms and conditions"}),className:"mt-1 rounded border-gray-300 text-primary-600 shadow-sm focus:border-primary-500 focus:ring-primary-500"}),(0,a.jsxs)("label",{className:"ml-2 text-sm text-gray-900",children:["I agree to the"," ",(0,a.jsx)("a",{href:"#",className:"text-primary-600 hover:text-primary-700",children:"Terms and Conditions"})," ","and"," ",(0,a.jsx)("a",{href:"#",className:"text-primary-600 hover:text-primary-700",children:"Privacy Policy"})]})]}),y.agree_to_terms&&(0,a.jsx)("p",{className:"text-red-600 text-sm",children:y.agree_to_terms.message})]})]}),(0,a.jsxs)("div",{className:"w-80 bg-gray-50 p-6 border-l",children:[(0,a.jsx)("h4",{className:"font-semibold text-gray-900 mb-4",children:"Order Summary"}),(0,a.jsx)("div",{className:"border rounded-lg p-3 bg-white mb-4",children:(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-gray-200 rounded-lg flex-shrink-0",children:n.images&&n.images[0]&&(0,a.jsx)("img",{src:n.images[0],alt:n.title,className:"w-full h-full object-cover rounded-lg"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h5",{className:"font-medium text-gray-900 truncate",children:n.title}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Sold by ",n.seller_name]}),(0,a.jsx)("p",{className:"font-semibold text-primary-600",children:(0,w.T4)(n.price,n.currency)})]})]})}),(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Item price"}),(0,a.jsx)("span",{className:"text-gray-900",children:(0,w.T4)(C,n.currency)})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Shipping"}),(0,a.jsx)("span",{className:"text-gray-900",children:"Free"})]}),!1,(0,a.jsx)("hr",{}),(0,a.jsxs)("div",{className:"flex justify-between font-semibold text-base",children:[(0,a.jsx)("span",{className:"text-gray-900",children:"Total"}),(0,a.jsx)("span",{className:"text-gray-900",children:(0,w.T4)(B,n.currency)})]})]}),(0,a.jsxs)("div",{className:"mt-6 p-3 bg-green-50 border border-green-200 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(v.Z,{className:"h-4 w-4 text-green-600"}),(0,a.jsx)("span",{className:"text-sm font-medium text-green-800",children:"Secure Transaction"})]}),(0,a.jsx)("p",{className:"text-xs text-green-700 mt-1",children:"Your payment information is encrypted and secure. Funds are held in escrow until order completion."})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-t bg-gray-50",children:[(0,a.jsx)("div",{className:"flex gap-3",children:m>1&&(0,a.jsx)("button",{type:"button",onClick:()=>{m>1&&x(m-1)},className:"btn-secondary",disabled:c,children:"Back"})}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("button",{type:"button",onClick:handleClose,className:"btn-ghost",disabled:c,children:"Cancel"}),m<3?(0,a.jsx)("button",{type:"button",onClick:()=>{m<3&&x(m+1)},className:"btn-primary",disabled:c,children:"Continue"}):(0,a.jsx)("button",{type:"submit",className:"btn-primary px-8",disabled:c||!f,children:c?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"loading-spinner mr-2"}),"Processing..."]}):"Place Order â€¢ ".concat((0,w.T4)(B,n.currency))})]})]})]})})})})})]})})}var B=t(3827);function ListingDetailPage(){var e;let s=(0,r.useParams)(),t=(0,r.useRouter)(),[n,c]=(0,i.useState)(null),[P,F]=(0,i.useState)(!0),[L,Z]=(0,i.useState)(null),[T,q]=(0,i.useState)(0),[E,O]=(0,i.useState)(!1),[A,D]=(0,i.useState)(!1),[I,M]=(0,i.useState)(!1),{user:U,isAuthenticated:R}=(0,C.a)(),{addItem:z}=(0,S.xS)(),Y=s.id;(0,i.useEffect)(()=>{Y&&fetchListing()},[Y]);let fetchListing=async()=>{try{F(!0),Z(null);let e=await k.BG.getListing(parseInt(Y));"success"===e.status?c(e.data.listing||e.data):Z(e.message||"Failed to load listing")}catch(e){console.error("Error fetching listing:",e),Z(e.message||"Failed to load listing")}finally{F(!1)}},handleShare=async()=>{if(navigator.share)try{await navigator.share({title:null==n?void 0:n.title,text:null==n?void 0:n.description,url:window.location.href})}catch(e){console.log("Share cancelled")}else await navigator.clipboard.writeText(window.location.href),o.toast.success("Link copied to clipboard!")};if(P)return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(B.Z,{}),(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"loading-spinner w-8 h-8 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Loading listing..."})]})})]});if(L||!n)return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(B.Z,{}),(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-red-600 mb-4",children:L||"Listing not found"}),(0,a.jsx)(d(),{href:"/marketplace",className:"btn-primary",children:"Back to Marketplace"})]})})]});let V=n.images||[],G=V.length>1;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(B.Z,{}),(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("div",{className:"bg-white border-b sticky top-0 z-40",children:(0,a.jsx)("div",{className:"container mx-auto px-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("button",{onClick:()=>t.back(),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,a.jsx)(m.Z,{className:"h-6 w-6"})}),(0,a.jsx)("h1",{className:"font-semibold text-gray-900 truncate max-w-md",children:n.title})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>{if(!R){o.toast.error("Please login to save favorites");return}D(!A),o.toast.success(A?"Removed from favorites":"Added to favorites")},className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:A?(0,a.jsx)(_.Z,{className:"h-6 w-6 text-red-500"}):(0,a.jsx)(x.Z,{className:"h-6 w-6"})}),(0,a.jsx)("button",{onClick:handleShare,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,a.jsx)(h.Z,{className:"h-6 w-6"})})]})]})})}),(0,a.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,a.jsxs)("div",{className:"lg:col-span-2",children:[(0,a.jsxs)("div",{className:"bg-white rounded-2xl overflow-hidden shadow-sm",children:[(0,a.jsx)("div",{className:"relative aspect-square bg-gray-100",children:V.length>0?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l(),{src:V[T],alt:n.title,fill:!0,className:"object-cover",priority:!0}),G&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:()=>{(null==n?void 0:n.images)&&q(e=>0===e?n.images.length-1:e-1)},className:"absolute left-4 top-1/2 -translate-y-1/2 p-2 bg-black/50 text-white rounded-full hover:bg-black/70 transition-colors",children:(0,a.jsx)(p.Z,{className:"h-5 w-5"})}),(0,a.jsx)("button",{onClick:()=>{(null==n?void 0:n.images)&&q(e=>e===n.images.length-1?0:e+1)},className:"absolute right-4 top-1/2 -translate-y-1/2 p-2 bg-black/50 text-white rounded-full hover:bg-black/70 transition-colors",children:(0,a.jsx)(g.Z,{className:"h-5 w-5"})}),(0,a.jsxs)("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 bg-black/50 text-white px-3 py-1 rounded-full text-sm",children:[T+1," / ",V.length]})]}),(0,a.jsx)("div",{className:"absolute top-4 left-4",children:(0,a.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-medium ".concat((0,w.xm)(n.condition||"")),children:(0,w.B3)(n.condition||"")})})]}):(0,a.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,a.jsxs)("div",{className:"text-center text-gray-400",children:[(0,a.jsx)(u.Z,{className:"h-16 w-16 mx-auto mb-2"}),(0,a.jsx)("p",{children:"No image available"})]})})}),G&&(0,a.jsx)("div",{className:"p-4 border-t",children:(0,a.jsx)("div",{className:"flex gap-2 overflow-x-auto",children:V.map((e,s)=>(0,a.jsx)("button",{onClick:()=>q(s),className:"flex-shrink-0 w-20 h-20 rounded-lg overflow-hidden border-2 transition-colors ".concat(T===s?"border-primary-500":"border-gray-200 hover:border-gray-300"),children:(0,a.jsx)(l(),{src:e,alt:"".concat(n.title," - Image ").concat(s+1),width:80,height:80,className:"w-full h-full object-cover"})},s))})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-sm mt-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Description"}),(0,a.jsxs)("div",{className:"prose prose-gray max-w-none",children:[(0,a.jsx)("p",{className:"text-gray-600 leading-relaxed ".concat(I?"":"line-clamp-3"),children:n.description}),n.description&&n.description.length>200&&(0,a.jsxs)("button",{onClick:()=>M(!I),className:"inline-flex items-center gap-1 text-primary-600 hover:text-primary-700 mt-2 font-medium",children:[I?"Show less":"Show more",(0,a.jsx)(j.Z,{className:"h-4 w-4 transition-transform ".concat(I?"rotate-180":"")})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-sm mt-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Seller Information"}),(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center flex-shrink-0",children:(0,a.jsx)(y.Z,{className:"h-6 w-6 text-gray-400"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900",children:n.seller_name}),n.seller_rating&&(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(f.Z,{className:"h-4 w-4 text-yellow-400 fill-current"}),(0,a.jsx)("span",{className:"text-sm text-gray-600",children:n.seller_rating})]})]}),n.seller_location&&(0,a.jsxs)("div",{className:"flex items-center gap-1 text-sm text-gray-600 mb-2",children:[(0,a.jsx)(b.Z,{className:"h-4 w-4"}),n.seller_location]}),(0,a.jsxs)("div",{className:"flex items-center gap-1 text-sm text-gray-600",children:[(0,a.jsx)(N.Z,{className:"h-4 w-4"}),"Member since ",(0,w.p6)(n.created_at)]})]})]}),(0,a.jsxs)("div",{className:"flex gap-3 mt-4",children:[(0,a.jsx)("button",{className:"btn-secondary flex-1",children:"Contact Seller"}),(0,a.jsx)(d(),{href:"/seller/".concat(n.seller_id),className:"btn-ghost flex-1 text-center",children:"View Profile"})]})]})]}),(0,a.jsx)("div",{className:"lg:col-span-1",children:(0,a.jsx)("div",{className:"sticky top-24",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-sm",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)("div",{className:"flex items-baseline gap-2 mb-2",children:[(0,a.jsx)("span",{className:"text-3xl font-bold text-gray-900",children:(0,w.T4)(n.price,n.currency)}),n.original_price&&n.original_price>n.price&&(0,a.jsx)("span",{className:"text-lg text-gray-500 line-through",children:(0,w.T4)(n.original_price,n.currency)})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Free shipping included"})]}),(0,a.jsxs)("div",{className:"space-y-3 mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Condition"}),(0,a.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat((0,w.xm)(n.condition||"")),children:(0,w.B3)(n.condition||"")})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Category"}),(0,a.jsx)("span",{className:"text-gray-900 capitalize",children:"string"==typeof n.category?n.category:(null===(e=n.category)||void 0===e?void 0:e.name)||"Other"})]}),n.location&&(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Location"}),(0,a.jsx)("span",{className:"text-gray-900",children:n.location})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Listed"}),(0,a.jsx)("span",{className:"text-gray-900",children:(0,w.p6)(n.created_at)})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("button",{onClick:()=>{if(!R){o.toast.error("Please login to make a purchase"),t.push("/login");return}O(!0)},className:"btn-primary w-full py-3 text-lg font-semibold",children:"Buy Now"}),(0,a.jsx)("button",{onClick:()=>{var e;if(n){if(!R){o.toast.error("Please login to add items to cart"),t.push("/login");return}z({id:n.id,listing_id:n.id,title:n.title,price:n.price,currency:n.currency,image:(null===(e=n.images)||void 0===e?void 0:e[0])||"",seller_name:n.seller_name||"Unknown Seller"}),o.toast.success("Added to cart!")}},className:"btn-secondary w-full py-3",children:"Add to Cart"})]}),(0,a.jsx)("div",{className:"mt-6 p-4 bg-green-50 border border-green-200 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(v.Z,{className:"h-5 w-5 text-green-600 flex-shrink-0 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-green-800 mb-1",children:"Secure Purchase"}),(0,a.jsx)("p",{className:"text-sm text-green-700",children:"Your payment is protected with escrow until you confirm receipt of the item."})]})]})}),(0,a.jsxs)("div",{className:"mt-4 space-y-2 text-sm text-gray-600",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{children:"Processing time"}),(0,a.jsx)("span",{children:"1-2 business days"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{children:"Shipping time"}),(0,a.jsx)("span",{children:"3-7 business days"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{children:"Return policy"}),(0,a.jsx)("span",{children:"30 days"})]})]})]})})})]})}),(0,a.jsx)(CheckoutModal,{isOpen:E,onClose:()=>O(!1),listing:n,onOrderSuccess:(e,s)=>{s?window.location.href=s:(o.toast.success("Order placed successfully!"),t.push("/orders/".concat(e)))}})]})]})}},9843:function(e,s,t){"use strict";t.d(s,{BG:function(){return r}});var a=t(4829);let i=a.Z.create({baseURL:"http://localhost/Envisage/backend/public/api",timeout:1e4,headers:{"Content-Type":"application/json"}});i.interceptors.request.use(e=>{{let s=localStorage.getItem("auth_token");s&&(e.headers.Authorization="Bearer ".concat(s))}return e},e=>Promise.reject(e)),i.interceptors.response.use(e=>e.data,e=>{var s,t;return(null===(s=e.response)||void 0===s?void 0:s.status)===401&&(localStorage.removeItem("auth_token"),localStorage.removeItem("user_data"),window.location.href="/auth/login"),Promise.reject((null===(t=e.response)||void 0===t?void 0:t.data)||e)});let r={getListings:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=new URLSearchParams;return Object.entries(e).forEach(e=>{let[t,a]=e;void 0!==a&&""!==a&&s.append(t,a.toString())}),i.get("/products?".concat(s.toString()))},getListing:async e=>i.get("/products/".concat(e)),createListing:async e=>i.post("/products",e),updateListing:async(e,s)=>i.put("/products/".concat(e),s),deleteListing:async e=>i.delete("/products/".concat(e)),getMyListings:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=new URLSearchParams;return Object.entries(e).forEach(e=>{let[t,a]=e;void 0!==a&&""!==a&&s.append(t,a.toString())}),i.get("/seller/products?".concat(s.toString()))},searchListings:async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i.get("/products",{params:{search:e,...s}})},buyListing:async(e,s)=>{let t={...s,items:[{product_id:e,quantity:1}]};return i.post("/orders",t)}};s.ZP=i},1628:function(e,s,t){"use strict";t.d(s,{B3:function(){return getConditionLabel},Ez:function(){return capitalizeFirst},SY:function(){return formatRelativeTime},T4:function(){return formatPrice},cn:function(){return cn},ox:function(){return getConditionBadgeColor},p6:function(){return formatDate},xm:function(){return getConditionColor}});var a=t(7042),i=t(3986);function cn(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,i.m)((0,a.W)(s))}function formatPrice(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";return new Intl.NumberFormat("en-US",{style:"currency",currency:s,minimumFractionDigits:0,maximumFractionDigits:2}).format(e)}function formatDate(e){return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"long",day:"numeric"}).format(new Date(e))}function formatRelativeTime(e){let s=new Date,t=new Date(e),a=Math.floor((s.getTime()-t.getTime())/1e3);if(a<60)return"Just now";let i=Math.floor(a/60);if(i<60)return"".concat(i," minute").concat(i>1?"s":""," ago");let r=Math.floor(i/60);if(r<24)return"".concat(r," hour").concat(r>1?"s":""," ago");let n=Math.floor(r/24);return n<30?"".concat(n," day").concat(n>1?"s":""," ago"):formatDate(e)}function capitalizeFirst(e){if(!e)return"";let s="string"==typeof e?e:e.name||e.slug||String(e);return s&&0!==s.length?s.charAt(0).toUpperCase()+s.slice(1):""}function getConditionBadgeColor(e){switch(e.toLowerCase()){case"new":return"badge-green";case"like_new":return"badge-blue";case"good":case"fair":return"badge-yellow";case"poor":return"badge-red";default:return"badge-gray"}}function getConditionColor(e){switch(e.toLowerCase()){case"new":return"bg-green-100 text-green-800";case"like_new":return"bg-blue-100 text-blue-800";case"good":return"bg-yellow-100 text-yellow-800";case"fair":return"bg-orange-100 text-orange-800";case"poor":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}}function getConditionLabel(e){return({new:"New",like_new:"Like New",good:"Good",fair:"Fair",poor:"Poor"})[e.toLowerCase()]||capitalizeFirst(e)}}},function(e){e.O(0,[424,858,732,865,39,266,827,971,472,744],function(){return e(e.s=3145)}),_N_E=e.O()}]);