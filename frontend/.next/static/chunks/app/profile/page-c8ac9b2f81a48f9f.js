(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[178],{5061:function(e,a,t){Promise.resolve().then(t.bind(t,9645))},9645:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return ProfilePage}});var r=t(7437),s=t(2265),n=t(732),l=t(1809),i=t(3531),o=t(2125),d=t(4424);function PhoneIcon({title:e,titleId:a,...t},r){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":a},t),e?s.createElement("title",{id:a},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 0 0 2.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 0 1-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 0 0-1.091-.852H4.5A2.25 2.25 0 0 0 2.25 4.5v2.25Z"}))}let c=s.forwardRef(PhoneIcon);var m=t(6263),u=t(2516),h=t(3827),x=t(4182),p=t(5925),b=t(4829);function ProfileContent(){let{user:e,getUser:a}=(0,u.a)(),[t,x]=(0,s.useState)(!1),[g,y]=(0,s.useState)(!1),[f,j]=(0,s.useState)({name:"",email:"",phone:"",address:"",city:"",country:"Zambia"});(0,s.useEffect)(()=>{e&&j({name:e.name||"",email:e.email||"",phone:e.phone||"",address:e.address||"",city:e.city||"",country:e.country||"Zambia"})},[e]);let handleSubmit=async e=>{e.preventDefault(),y(!0);try{let e=localStorage.getItem("envisage_auth_token"),t=await b.Z.put("".concat("http://localhost/Envisage/backend/public/api","/user/profile"),f,{headers:{Authorization:"Bearer ".concat(e),Accept:"application/json","Content-Type":"application/json"}});t.data&&(p.toast.success(t.data.message||"Profile updated successfully!"),x(!1),await a())}catch(e){var t,r;console.error("Profile update error:",e),p.toast.error((null===(r=e.response)||void 0===r?void 0:null===(t=r.data)||void 0===t?void 0:t.message)||"Failed to update profile")}finally{y(!1)}},handleChange=e=>{j(a=>({...a,[e.target.name]:e.target.value}))},v=(null==e?void 0:e.role)||"customer",w=v.charAt(0).toUpperCase()+v.slice(1);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(h.Z,{}),(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,r.jsxs)(n.E.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"My Profile"}),(0,r.jsx)("p",{className:"text-gray-600 mt-1",children:"Manage your account information"})]}),(0,r.jsxs)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-lg shadow-md overflow-hidden",children:[(0,r.jsx)("div",{className:"bg-gradient-to-r from-primary-600 to-primary-700 px-6 py-8",children:(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"h-24 w-24 rounded-full bg-white flex items-center justify-center text-primary-600",children:(0,r.jsx)(l.Z,{className:"h-12 w-12"})}),(0,r.jsx)("button",{className:"absolute bottom-0 right-0 bg-white rounded-full p-2 shadow-lg hover:bg-gray-100 transition-colors",children:(0,r.jsx)(i.Z,{className:"h-4 w-4 text-gray-600"})})]}),(0,r.jsxs)("div",{className:"text-white",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold",children:null==e?void 0:e.name}),(0,r.jsx)("p",{className:"text-primary-100",children:null==e?void 0:e.email}),(0,r.jsx)("span",{className:"inline-block mt-2 px-3 py-1 bg-white/20 rounded-full text-sm",children:w})]})]})}),(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Personal Information"}),t?null:(0,r.jsxs)("button",{onClick:()=>x(!0),className:"flex items-center space-x-2 text-primary-600 hover:text-primary-700",children:[(0,r.jsx)(o.Z,{className:"h-5 w-5"}),(0,r.jsx)("span",{children:"Edit Profile"})]})]}),(0,r.jsxs)("form",{onSubmit:handleSubmit,className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(l.Z,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),(0,r.jsx)("input",{type:"text",name:"name",value:f.name,onChange:handleChange,disabled:!t,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent disabled:bg-gray-50 disabled:text-gray-500"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(d.Z,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),(0,r.jsx)("input",{type:"email",name:"email",value:f.email,onChange:handleChange,disabled:!t,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent disabled:bg-gray-50 disabled:text-gray-500"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(c,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),(0,r.jsx)("input",{type:"tel",name:"phone",value:f.phone,onChange:handleChange,disabled:!t,placeholder:"+260 XXX XXX XXX",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent disabled:bg-gray-50 disabled:text-gray-500"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Country"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(m.Z,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),(0,r.jsxs)("select",{name:"country",value:f.country,onChange:handleChange,disabled:!t,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent disabled:bg-gray-50 disabled:text-gray-500",children:[(0,r.jsx)("option",{value:"Zambia",children:"Zambia"}),(0,r.jsx)("option",{value:"Zimbabwe",children:"Zimbabwe"}),(0,r.jsx)("option",{value:"Malawi",children:"Malawi"}),(0,r.jsx)("option",{value:"Tanzania",children:"Tanzania"}),(0,r.jsx)("option",{value:"Other",children:"Other"})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"City"}),(0,r.jsx)("input",{type:"text",name:"city",value:f.city,onChange:handleChange,disabled:!t,placeholder:"Lusaka",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent disabled:bg-gray-50 disabled:text-gray-500"})]}),(0,r.jsxs)("div",{className:"md:col-span-2",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address"}),(0,r.jsx)("textarea",{name:"address",value:f.address,onChange:handleChange,disabled:!t,rows:3,placeholder:"Enter your full address",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent disabled:bg-gray-50 disabled:text-gray-500"})]})]}),t&&(0,r.jsxs)("div",{className:"flex items-center justify-end space-x-4 pt-6 border-t",children:[(0,r.jsx)("button",{type:"button",onClick:()=>{x(!1),e&&j({name:e.name||"",email:e.email||"",phone:e.phone||"",address:e.address||"",city:e.city||"",country:e.country||"Zambia"})},disabled:g,className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancel"}),(0,r.jsx)("button",{type:"submit",disabled:g,className:"btn-primary px-6 py-2 disabled:opacity-50 disabled:cursor-not-allowed",children:g?"Saving...":"Save Changes"})]})]})]})]}),(0,r.jsxs)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"mt-6 bg-white rounded-lg shadow-md p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Account Settings"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium text-gray-900",children:"Change Password"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Update your password to keep your account secure"})]}),(0,r.jsx)("button",{className:"text-primary-600 hover:text-primary-700 font-medium",children:"Update"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium text-gray-900",children:"Email Notifications"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Manage your email notification preferences"})]}),(0,r.jsx)("button",{className:"text-primary-600 hover:text-primary-700 font-medium",children:"Configure"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 border border-red-200 rounded-lg bg-red-50",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium text-red-900",children:"Delete Account"}),(0,r.jsx)("p",{className:"text-sm text-red-600",children:"Permanently delete your account and all data"})]}),(0,r.jsx)("button",{className:"text-red-600 hover:text-red-700 font-medium",children:"Delete"})]})]})]})]})})]})}function ProfilePage(){return(0,r.jsx)(x.Z,{children:(0,r.jsx)(ProfileContent,{})})}},4182:function(e,a,t){"use strict";t.d(a,{Z:function(){return ProtectedRoute}});var r=t(7437),s=t(2265),n=t(4033),l=t(2516);function ProtectedRoute(e){let{children:a,redirectTo:t="/login",fallback:i,requiredRoles:o=[]}=e,{isAuthenticated:d,isLoading:c,user:m}=(0,l.a)(),u=(0,n.useRouter)();if((0,s.useEffect)(()=>{if(!c){if(!d){let e=window.location.pathname;u.push("".concat(t,"?redirect=").concat(encodeURIComponent(e)));return}if(o.length>0&&m){let e=m.roles||[],a=o.some(a=>e.includes(a));if(!a){u.push("/marketplace");return}}}},[d,c,m,u,t,o]),c)return i||(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),(0,r.jsx)("p",{className:"mt-4 text-gray-600",children:"Verifying access..."})]})});if(!d)return null;if(o.length>0&&m){let e=m.roles||[],a=o.some(a=>e.includes(a));if(!a)return(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,r.jsx)("div",{className:"text-center max-w-md mx-auto p-6",children:(0,r.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-yellow-800 mb-2",children:"Access Denied"}),(0,r.jsx)("p",{className:"text-yellow-700 mb-4",children:"You don't have permission to access this page."}),(0,r.jsx)("button",{onClick:()=>u.push("/marketplace"),className:"btn-primary px-6 py-2",children:"Go to Marketplace"})]})})})}return(0,r.jsx)(r.Fragment,{children:a})}},3531:function(e,a,t){"use strict";var r=t(2265);function CameraIcon({title:e,titleId:a,...t},s){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":a},t),e?r.createElement("title",{id:a},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 0 1 5.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 0 0-1.134-.175 2.31 2.31 0 0 1-1.64-1.055l-.822-1.316a2.192 2.192 0 0 0-1.736-1.039 48.774 48.774 0 0 0-5.232 0 2.192 2.192 0 0 0-1.736 1.039l-.821 1.316Z"}),r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0ZM18.75 10.5h.008v.008h-.008V10.5Z"}))}let s=r.forwardRef(CameraIcon);a.Z=s},4424:function(e,a,t){"use strict";var r=t(2265);function EnvelopeIcon({title:e,titleId:a,...t},s){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":a},t),e?r.createElement("title",{id:a},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"}))}let s=r.forwardRef(EnvelopeIcon);a.Z=s},6263:function(e,a,t){"use strict";var r=t(2265);function MapPinIcon({title:e,titleId:a,...t},s){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":a},t),e?r.createElement("title",{id:a},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}),r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z"}))}let s=r.forwardRef(MapPinIcon);a.Z=s},2125:function(e,a,t){"use strict";var r=t(2265);function PencilIcon({title:e,titleId:a,...t},s){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":a},t),e?r.createElement("title",{id:a},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))}let s=r.forwardRef(PencilIcon);a.Z=s}},function(e){e.O(0,[424,858,732,827,971,472,744],function(){return e(e.s=5061)}),_N_E=e.O()}]);