(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[580],{9727:function(e,s,t){Promise.resolve().then(t.bind(t,5943))},5943:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return AdminPanel}});var l=t(7437),a=t(2265),n=t(4033),r=t(2516),i=t(4829),d=t(3827),c=t(5925),o=t(8811),x=t.n(o);let u=x()(()=>t.e(317).then(t.bind(t,3317)),{loadableGenerated:{webpack:()=>[3317]},ssr:!1}),m=x()(()=>t.e(456).then(t.bind(t,456)),{loadableGenerated:{webpack:()=>[456]},ssr:!1}),g=x()(()=>t.e(419).then(t.bind(t,3185)),{loadableGenerated:{webpack:()=>[3185]},ssr:!1}),h=x()(()=>t.e(946).then(t.bind(t,2946)),{loadableGenerated:{webpack:()=>[2946]},ssr:!1}),j=x()(()=>t.e(544).then(t.bind(t,6544)),{loadableGenerated:{webpack:()=>[6544]},ssr:!1}),p=x()(()=>t.e(392).then(t.bind(t,4392)),{loadableGenerated:{webpack:()=>[4392]},ssr:!1}),b=x()(()=>t.e(455).then(t.bind(t,1888)),{loadableGenerated:{webpack:()=>[1888]},ssr:!1}),f="http://localhost/Envisage/backend/public/api";function AdminPanel(){var e,s,t,o,x,v,N,y,w,D,_,S,C;let{user:k,isAuthenticated:O,isLoading:A}=(0,r.a)(),P=(0,n.useRouter)(),[E,M]=(0,a.useState)(null),[R,F]=(0,a.useState)(null),[L,T]=(0,a.useState)(!0),[B,G]=(0,a.useState)("overview"),fetchAdminData=async()=>{try{let e=localStorage.getItem("envisage_auth_token"),s=await i.Z.get("".concat(f,"/admin/overview"),{headers:{Authorization:"Bearer ".concat(e),Accept:"application/json"}});M(s.data);let t=await i.Z.get("".concat(f,"/admin/statistics"),{headers:{Authorization:"Bearer ".concat(e),Accept:"application/json"}});F(t.data)}catch(t){var e,s;console.error("Failed to fetch admin data:",t),c.toast.error((null===(s=t.response)||void 0===s?void 0:null===(e=s.data)||void 0===e?void 0:e.message)||"Failed to load admin data")}finally{T(!1)}};return((0,a.useEffect)(()=>{if(!A){if(!O){P.push("/login?redirect=/admin-panel");return}let e=null==k?void 0:k.role;if("admin"!==e){c.toast.error("Access denied. Admin privileges required."),P.push("/dashboard");return}fetchAdminData()}},[A,O,k,P]),A||L)?(0,l.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,l.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(d.Z,{}),(0,l.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,l.jsx)("div",{className:"bg-white shadow",children:(0,l.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,l.jsxs)("div",{className:"py-6",children:[(0,l.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Admin Dashboard"}),(0,l.jsx)("p",{className:"mt-1 text-sm text-gray-600",children:"Comprehensive system management"})]})})}),(0,l.jsx)("div",{className:"bg-white border-b border-gray-200",children:(0,l.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,l.jsx)("nav",{className:"flex space-x-8 overflow-x-auto","aria-label":"Tabs",children:[{id:"overview",label:"Overview",icon:"\uD83D\uDCCA"},{id:"users",label:"Users",icon:"\uD83D\uDC65"},{id:"products",label:"Products",icon:"\uD83D\uDCE6"},{id:"orders",label:"Orders",icon:"\uD83D\uDED2"},{id:"categories",label:"Categories",icon:"\uD83C\uDFF7️"},{id:"analytics",label:"Analytics",icon:"\uD83D\uDCC8"},{id:"settings",label:"Settings",icon:"⚙️"},{id:"logs",label:"Logs",icon:"\uD83D\uDCDD"}].map(e=>(0,l.jsxs)("button",{onClick:()=>G(e.id),className:"\n                    whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center gap-2\n                    ".concat(B===e.id?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","\n                  "),children:[(0,l.jsx)("span",{children:e.icon}),e.label]},e.id))})})}),(0,l.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:["overview"===B&&(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,l.jsx)(StatCard,{title:"Total Users",value:(null==E?void 0:E.total_users)||0,icon:"\uD83D\uDC65",color:"blue"}),(0,l.jsx)(StatCard,{title:"Total Products",value:(null==E?void 0:E.total_products)||0,icon:"\uD83D\uDCE6",color:"green"}),(0,l.jsx)(StatCard,{title:"Total Orders",value:(null==E?void 0:E.total_orders)||0,icon:"\uD83D\uDED2",color:"purple"}),(0,l.jsx)(StatCard,{title:"Total Revenue",value:"$".concat(((null==E?void 0:E.total_revenue)||0).toFixed(2)),icon:"\uD83D\uDCB0",color:"yellow"})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-6",children:[(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm text-gray-600",children:"Pending Orders"}),(0,l.jsx)("p",{className:"text-3xl font-bold text-orange-600 mt-2",children:(null==E?void 0:E.pending_orders)||0})]}),(0,l.jsx)("div",{className:"w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center",children:(0,l.jsx)("span",{className:"text-2xl",children:"⏳"})})]}),(0,l.jsx)("p",{className:"text-xs text-gray-500 mt-3",children:"Requires attention"})]}),(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm text-gray-600",children:"Active Products"}),(0,l.jsx)("p",{className:"text-3xl font-bold text-green-600 mt-2",children:(null==E?void 0:E.active_products)||0})]}),(0,l.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:(0,l.jsx)("span",{className:"text-2xl",children:"✅"})})]}),(0,l.jsx)("p",{className:"text-xs text-gray-500 mt-3",children:"Currently listed"})]})]}),R&&(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Users Breakdown"}),(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-gray-600",children:"Customers"}),(0,l.jsx)("span",{className:"font-semibold text-gray-900",children:(null===(e=R.users)||void 0===e?void 0:e.customers)||0})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-gray-600",children:"Sellers"}),(0,l.jsx)("span",{className:"font-semibold text-gray-900",children:(null===(s=R.users)||void 0===s?void 0:s.sellers)||0})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-gray-600",children:"Admins"}),(0,l.jsx)("span",{className:"font-semibold text-gray-900",children:(null===(t=R.users)||void 0===t?void 0:t.admins)||0})]}),(0,l.jsx)("div",{className:"pt-3 border-t",children:(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"font-medium text-gray-900",children:"Total"}),(0,l.jsx)("span",{className:"font-bold text-primary-600",children:(null===(o=R.users)||void 0===o?void 0:o.total)||0})]})})]})]}),(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Products Status"}),(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-gray-600",children:"Active"}),(0,l.jsx)("span",{className:"font-semibold text-green-600",children:(null===(x=R.products)||void 0===x?void 0:x.active)||0})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-gray-600",children:"Draft"}),(0,l.jsx)("span",{className:"font-semibold text-yellow-600",children:(null===(v=R.products)||void 0===v?void 0:v.draft)||0})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-gray-600",children:"Out of Stock"}),(0,l.jsx)("span",{className:"font-semibold text-red-600",children:(null===(N=R.products)||void 0===N?void 0:N.out_of_stock)||0})]}),(0,l.jsx)("div",{className:"pt-3 border-t",children:(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"font-medium text-gray-900",children:"Total"}),(0,l.jsx)("span",{className:"font-bold text-primary-600",children:(null===(y=R.products)||void 0===y?void 0:y.total)||0})]})})]})]}),(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Orders Status"}),(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-gray-600",children:"Pending"}),(0,l.jsx)("span",{className:"font-semibold text-yellow-600",children:(null===(w=R.orders)||void 0===w?void 0:w.pending)||0})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-gray-600",children:"Processing"}),(0,l.jsx)("span",{className:"font-semibold text-blue-600",children:(null===(D=R.orders)||void 0===D?void 0:D.processing)||0})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-gray-600",children:"Delivered"}),(0,l.jsx)("span",{className:"font-semibold text-green-600",children:(null===(_=R.orders)||void 0===_?void 0:_.delivered)||0})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-gray-600",children:"Cancelled"}),(0,l.jsx)("span",{className:"font-semibold text-red-600",children:(null===(S=R.orders)||void 0===S?void 0:S.cancelled)||0})]}),(0,l.jsx)("div",{className:"pt-3 border-t",children:(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"font-medium text-gray-900",children:"Total"}),(0,l.jsx)("span",{className:"font-bold text-primary-600",children:(null===(C=R.orders)||void 0===C?void 0:C.total)||0})]})})]})]})]}),(null==R?void 0:R.revenue)&&(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Revenue Overview"}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,l.jsxs)("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[(0,l.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Total Revenue"}),(0,l.jsxs)("p",{className:"text-2xl font-bold text-green-600",children:["$",(R.revenue.total||0).toFixed(2)]})]}),(0,l.jsxs)("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[(0,l.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"This Month"}),(0,l.jsxs)("p",{className:"text-2xl font-bold text-blue-600",children:["$",(R.revenue.this_month||0).toFixed(2)]})]}),(0,l.jsxs)("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[(0,l.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Last Month"}),(0,l.jsxs)("p",{className:"text-2xl font-bold text-purple-600",children:["$",(R.revenue.last_month||0).toFixed(2)]})]})]})]}),(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,l.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),(0,l.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,l.jsx)(QuickActionButton,{label:"Manage Users",icon:"\uD83D\uDC65",onClick:()=>G("users")}),(0,l.jsx)(QuickActionButton,{label:"Manage Products",icon:"\uD83D\uDCE6",onClick:()=>G("products")}),(0,l.jsx)(QuickActionButton,{label:"View Orders",icon:"\uD83D\uDED2",onClick:()=>G("orders")}),(0,l.jsx)(QuickActionButton,{label:"System Settings",icon:"⚙️",onClick:()=>G("settings")})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,l.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Users"}),(0,l.jsx)("div",{className:"space-y-3",children:(null==E?void 0:E.recent_users)&&E.recent_users.length>0?E.recent_users.map(e=>(0,l.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-medium text-gray-900",children:e.name}),(0,l.jsx)("p",{className:"text-sm text-gray-500",children:e.email})]}),(0,l.jsx)("span",{className:"text-xs text-gray-400",children:new Date(e.created_at).toLocaleDateString()})]},e.id)):(0,l.jsx)("p",{className:"text-gray-500 text-sm",children:"No recent users"})})]}),(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,l.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Orders"}),(0,l.jsx)("div",{className:"space-y-3",children:(null==E?void 0:E.recent_orders)&&E.recent_orders.length>0?E.recent_orders.map(e=>(0,l.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded",children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("p",{className:"font-medium text-gray-900",children:["Order #",e.id]}),(0,l.jsxs)("p",{className:"text-sm text-gray-500",children:["$",e.total]})]}),(0,l.jsx)("span",{className:"text-xs px-2 py-1 bg-blue-100 text-blue-800 rounded",children:e.status})]},e.id)):(0,l.jsx)("p",{className:"text-gray-500 text-sm",children:"No recent orders"})})]})]}),(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,l.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"System Status"}),(0,l.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,l.jsx)(StatusIndicator,{label:"API",status:"online"}),(0,l.jsx)(StatusIndicator,{label:"Database",status:"online"}),(0,l.jsx)(StatusIndicator,{label:"Storage",status:"online"}),(0,l.jsx)(StatusIndicator,{label:"Mail Service",status:"warning"})]})]})]}),"users"===B&&(0,l.jsx)(u,{}),"products"===B&&(0,l.jsx)(m,{}),"orders"===B&&(0,l.jsx)(g,{}),"categories"===B&&(0,l.jsx)(h,{}),"analytics"===B&&(0,l.jsx)(b,{}),"settings"===B&&(0,l.jsx)(j,{}),"logs"===B&&(0,l.jsx)(p,{})]})]})]})}function StatCard(e){let{title:s,value:t,icon:a,color:n}=e;return(0,l.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm font-medium text-gray-600",children:s}),(0,l.jsx)("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:t})]}),(0,l.jsx)("div",{className:"".concat({blue:"bg-blue-100 text-blue-600",green:"bg-green-100 text-green-600",purple:"bg-purple-100 text-purple-600",yellow:"bg-yellow-100 text-yellow-600"}[n]||"bg-gray-100 text-gray-600"," rounded-full p-3 text-2xl"),children:a})]})})}function QuickActionButton(e){let{label:s,icon:t,onClick:a}=e;return(0,l.jsxs)("button",{onClick:a,className:"flex flex-col items-center justify-center p-4 bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors",children:[(0,l.jsx)("span",{className:"text-2xl mb-2",children:t}),(0,l.jsx)("span",{className:"text-sm font-medium text-gray-700",children:s})]})}function StatusIndicator(e){let{label:s,status:t}=e,a={online:{color:"bg-green-100 text-green-800",text:"Online"},offline:{color:"bg-red-100 text-red-800",text:"Offline"},warning:{color:"bg-yellow-100 text-yellow-800",text:"Warning"}}[t];return(0,l.jsxs)("div",{className:"flex flex-col items-center p-3 bg-gray-50 rounded",children:[(0,l.jsx)("span",{className:"text-sm font-medium text-gray-700 mb-1",children:s}),(0,l.jsx)("span",{className:"px-2 py-1 text-xs rounded ".concat(a.color),children:a.text})]})}},8811:function(e,s,t){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"default",{enumerable:!0,get:function(){return dynamic}});let l=t(1024);t(2265);let a=l._(t(7075));function convertModule(e){return{default:(null==e?void 0:e.default)||e}}function dynamic(e,s){let t=a.default,l={loading:e=>{let{error:s,isLoading:t,pastDelay:l}=e;return null}};"function"==typeof e&&(l.loader=e),Object.assign(l,s);let n=l.loader;return t({...l,loader:()=>null!=n?n().then(convertModule):Promise.resolve(convertModule(()=>null))})}("function"==typeof s.default||"object"==typeof s.default&&null!==s.default)&&void 0===s.default.__esModule&&(Object.defineProperty(s.default,"__esModule",{value:!0}),Object.assign(s.default,s),e.exports=s.default)},9167:function(e,s,t){"use strict";function NoSSR(e){let{children:s}=e;return s}Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"NoSSR",{enumerable:!0,get:function(){return NoSSR}}),t(1283)},7075:function(e,s,t){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"default",{enumerable:!0,get:function(){return r}});let l=t(1024),a=l._(t(2265)),n=t(9167);function Loadable(e){let s=Object.assign({loader:null,loading:null,ssr:!0},e);function LoadableComponent(e){let t=s.loading,l=a.default.createElement(t,{isLoading:!0,pastDelay:!0,error:null}),r=s.ssr?a.default.Fragment:n.NoSSR,i=s.lazy;return a.default.createElement(a.default.Suspense,{fallback:l},a.default.createElement(r,null,a.default.createElement(i,e)))}return s.lazy=a.default.lazy(s.loader),LoadableComponent.displayName="LoadableComponent",LoadableComponent}let r=Loadable}},function(e){e.O(0,[424,858,827,971,472,744],function(){return e(e.s=9727)}),_N_E=e.O()}]);