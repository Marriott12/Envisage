"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[456],{456:function(e,t,a){a.r(t),a.d(t,{default:function(){return ProductsManagement}});var s=a(7437),c=a(2265),r=a(4829),d=a(5925);let l="http://localhost/Envisage/backend/public/api";function ProductsManagement(){let[e,t]=(0,c.useState)([]),[a,o]=(0,c.useState)(!0),fetchProducts=async()=>{try{let e=localStorage.getItem("envisage_auth_token"),a=await r.Z.get("".concat(l,"/products"),{headers:{Authorization:"Bearer ".concat(e)}}),s=a.data.data||a.data,c=s.listings||s||[];t(Array.isArray(c)?c:[])}catch(e){console.error("Failed to load products:",e),d.toast.error("Failed to load products"),t([])}finally{o(!1)}};(0,c.useEffect)(()=>{fetchProducts()},[]);let handleDeleteProduct=async e=>{if(confirm("Are you sure you want to delete this product?"))try{let t=localStorage.getItem("envisage_auth_token");await r.Z.delete("".concat(l,"/products/").concat(e),{headers:{Authorization:"Bearer ".concat(t)}}),d.toast.success("Product deleted successfully"),fetchProducts()}catch(e){d.toast.error("Failed to delete product")}},handleUpdateStatus=async(e,t)=>{try{let a=localStorage.getItem("envisage_auth_token");await r.Z.put("".concat(l,"/products/").concat(e),{status:t},{headers:{Authorization:"Bearer ".concat(a)}}),d.toast.success("Product status updated"),fetchProducts()}catch(e){d.toast.error("Failed to update product")}};return a?(0,s.jsx)("div",{className:"flex justify-center py-8",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Products Management"}),(0,s.jsxs)("div",{className:"text-sm text-gray-600",children:["Total: ",e.length," products"]})]}),(0,s.jsx)("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"ID"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Title"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Price"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Stock"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(e=>(0,s.jsxs)("tr",{children:[(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["#",e.id]}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.title}),(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["$",e.price]}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.stock}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsxs)("select",{value:e.status,onChange:t=>handleUpdateStatus(e.id,t.target.value),className:"text-sm border rounded px-2 py-1",children:[(0,s.jsx)("option",{value:"draft",children:"Draft"}),(0,s.jsx)("option",{value:"active",children:"Active"}),(0,s.jsx)("option",{value:"out_of_stock",children:"Out of Stock"}),(0,s.jsx)("option",{value:"archived",children:"Archived"})]})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm space-x-2",children:(0,s.jsx)("button",{onClick:()=>handleDeleteProduct(e.id),className:"text-red-600 hover:text-red-900",children:"Delete"})})]},e.id))})]})})]})}}}]);