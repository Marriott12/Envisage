(()=>{var e={};e.id=4178,e.ids=[4178],e.modules={5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},9491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5158:e=>{"use strict";e.exports=require("http2")},5687:e=>{"use strict";e.exports=require("https")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},6224:e=>{"use strict";e.exports=require("tty")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},2322:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>l.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>c,routeModule:()=>p,tree:()=>d});var r=a(7096),t=a(6132),i=a(7284),l=a.n(i),n=a(2564),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);a.d(s,o);let d=["",{children:["profile",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,6408)),"c:\\wamp64\\www\\Envisage\\frontend\\app\\profile\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,5345)),"c:\\wamp64\\www\\Envisage\\frontend\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,9291,23)),"next/dist/client/components/not-found-error"]}],c=["c:\\wamp64\\www\\Envisage\\frontend\\app\\profile\\page.tsx"],m="/profile/page",u={require:a,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:t.x.APP_PAGE,page:"/profile/page",pathname:"/profile",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},4616:(e,s,a)=>{Promise.resolve().then(a.bind(a,1503))},1503:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>ProfilePage});var r=a(784),t=a(9885),i=a(9139),l=a(8750),n=a(250),o=a(797),d=a(1867),c=a(880),m=a(1751),u=a(3653),p=a(8282),x=a(7152),h=a(345),g=a(8551);function ProfileContent(){let{user:e,getUser:s}=(0,u.a)(),[a,x]=(0,t.useState)(!1),[y,b]=(0,t.useState)(!1),[f,j]=(0,t.useState)({name:"",email:"",phone:"",address:"",city:"",country:"Zambia"});(0,t.useEffect)(()=>{e&&j({name:e.name||"",email:e.email||"",phone:e.phone||"",address:e.address||"",city:e.city||"",country:e.country||"Zambia"})},[e]);let handleSubmit=async e=>{e.preventDefault(),b(!0);try{let e=localStorage.getItem("envisage_auth_token"),a=await g.Z.put("http://localhost/Envisage/backend/public/api/user/profile",f,{headers:{Authorization:`Bearer ${e}`,Accept:"application/json","Content-Type":"application/json"}});a.data&&(h.toast.success(a.data.message||"Profile updated successfully!"),x(!1),await s())}catch(e){console.error("Profile update error:",e),h.toast.error(e.response?.data?.message||"Failed to update profile")}finally{b(!1)}},handleChange=e=>{j(s=>({...s,[e.target.name]:e.target.value}))},v=e?.role||"customer",N=v.charAt(0).toUpperCase()+v.slice(1);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(p.Z,{}),(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,r.jsxs)(i.E.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"My Profile"}),(0,r.jsx)("p",{className:"text-gray-600 mt-1",children:"Manage your account information"})]}),(0,r.jsxs)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-lg shadow-md overflow-hidden",children:[(0,r.jsx)("div",{className:"bg-gradient-to-r from-primary-600 to-primary-700 px-6 py-8",children:(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"h-24 w-24 rounded-full bg-white flex items-center justify-center text-primary-600",children:(0,r.jsx)(l.Z,{className:"h-12 w-12"})}),(0,r.jsx)("button",{className:"absolute bottom-0 right-0 bg-white rounded-full p-2 shadow-lg hover:bg-gray-100 transition-colors",children:(0,r.jsx)(n.Z,{className:"h-4 w-4 text-gray-600"})})]}),(0,r.jsxs)("div",{className:"text-white",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold",children:e?.name}),(0,r.jsx)("p",{className:"text-primary-100",children:e?.email}),(0,r.jsx)("span",{className:"inline-block mt-2 px-3 py-1 bg-white/20 rounded-full text-sm",children:N})]})]})}),(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Personal Information"}),a?null:(0,r.jsxs)("button",{onClick:()=>x(!0),className:"flex items-center space-x-2 text-primary-600 hover:text-primary-700",children:[(0,r.jsx)(o.Z,{className:"h-5 w-5"}),(0,r.jsx)("span",{children:"Edit Profile"})]})]}),(0,r.jsxs)("form",{onSubmit:handleSubmit,className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(l.Z,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),(0,r.jsx)("input",{type:"text",name:"name",value:f.name,onChange:handleChange,disabled:!a,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent disabled:bg-gray-50 disabled:text-gray-500"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(d.Z,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),(0,r.jsx)("input",{type:"email",name:"email",value:f.email,onChange:handleChange,disabled:!a,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent disabled:bg-gray-50 disabled:text-gray-500"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(c.Z,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),(0,r.jsx)("input",{type:"tel",name:"phone",value:f.phone,onChange:handleChange,disabled:!a,placeholder:"+260 XXX XXX XXX",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent disabled:bg-gray-50 disabled:text-gray-500"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Country"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(m.Z,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),(0,r.jsxs)("select",{name:"country",value:f.country,onChange:handleChange,disabled:!a,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent disabled:bg-gray-50 disabled:text-gray-500",children:[(0,r.jsx)("option",{value:"Zambia",children:"Zambia"}),(0,r.jsx)("option",{value:"Zimbabwe",children:"Zimbabwe"}),(0,r.jsx)("option",{value:"Malawi",children:"Malawi"}),(0,r.jsx)("option",{value:"Tanzania",children:"Tanzania"}),(0,r.jsx)("option",{value:"Other",children:"Other"})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"City"}),(0,r.jsx)("input",{type:"text",name:"city",value:f.city,onChange:handleChange,disabled:!a,placeholder:"Lusaka",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent disabled:bg-gray-50 disabled:text-gray-500"})]}),(0,r.jsxs)("div",{className:"md:col-span-2",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address"}),(0,r.jsx)("textarea",{name:"address",value:f.address,onChange:handleChange,disabled:!a,rows:3,placeholder:"Enter your full address",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent disabled:bg-gray-50 disabled:text-gray-500"})]})]}),a&&(0,r.jsxs)("div",{className:"flex items-center justify-end space-x-4 pt-6 border-t",children:[(0,r.jsx)("button",{type:"button",onClick:()=>{x(!1),e&&j({name:e.name||"",email:e.email||"",phone:e.phone||"",address:e.address||"",city:e.city||"",country:e.country||"Zambia"})},disabled:y,className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancel"}),(0,r.jsx)("button",{type:"submit",disabled:y,className:"btn-primary px-6 py-2 disabled:opacity-50 disabled:cursor-not-allowed",children:y?"Saving...":"Save Changes"})]})]})]})]}),(0,r.jsxs)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"mt-6 bg-white rounded-lg shadow-md p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Account Settings"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium text-gray-900",children:"Change Password"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Update your password to keep your account secure"})]}),(0,r.jsx)("button",{className:"text-primary-600 hover:text-primary-700 font-medium",children:"Update"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium text-gray-900",children:"Email Notifications"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Manage your email notification preferences"})]}),(0,r.jsx)("button",{className:"text-primary-600 hover:text-primary-700 font-medium",children:"Configure"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 border border-red-200 rounded-lg bg-red-50",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium text-red-900",children:"Delete Account"}),(0,r.jsx)("p",{className:"text-sm text-red-600",children:"Permanently delete your account and all data"})]}),(0,r.jsx)("button",{className:"text-red-600 hover:text-red-700 font-medium",children:"Delete"})]})]})]})]})})]})}function ProfilePage(){return(0,r.jsx)(x.Z,{children:(0,r.jsx)(ProfileContent,{})})}},6408:(e,s,a)=>{"use strict";a.r(s),a.d(s,{$$typeof:()=>l,__esModule:()=>i,default:()=>o});var r=a(5153);let t=(0,r.createProxy)(String.raw`c:\wamp64\www\Envisage\frontend\app\profile\page.tsx`),{__esModule:i,$$typeof:l}=t,n=t.default,o=n}};var s=require("../../webpack-runtime.js");s.C(e);var __webpack_exec__=e=>s(s.s=e),a=s.X(0,[2527,7721,7941,9139,250,5108,7089,3653,8282,7152],()=>__webpack_exec__(2322));module.exports=a})();