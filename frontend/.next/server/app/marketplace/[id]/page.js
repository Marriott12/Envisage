(()=>{var e={};e.id=6688,e.ids=[6688],e.modules={5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},9491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5158:e=>{"use strict";e.exports=require("http2")},5687:e=>{"use strict";e.exports=require("https")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},6224:e=>{"use strict";e.exports=require("tty")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},794:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>o,routeModule:()=>p,tree:()=>d});var a=t(7096),i=t(6132),r=t(7284),l=t.n(r),n=t(2564),c={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);t.d(s,c);let d=["",{children:["marketplace",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,5575)),"c:\\wamp64\\www\\Envisage\\frontend\\app\\marketplace\\[id]\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,5345)),"c:\\wamp64\\www\\Envisage\\frontend\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,9291,23)),"next/dist/client/components/not-found-error"]}],o=["c:\\wamp64\\www\\Envisage\\frontend\\app\\marketplace\\[id]\\page.tsx"],m="/marketplace/[id]/page",x={require:t,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/marketplace/[id]/page",pathname:"/marketplace/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},4407:(e,s,t)=>{Promise.resolve().then(t.bind(t,7916))},7916:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>ListingDetailPage});var a=t(784),i=t(9885),r=t(7114),l=t(2451),n=t.n(l),c=t(1440),d=t.n(c),o=t(345),m=t(9317),x=t(8e3),p=t(4673),h=t(6320),g=t(2129),u=t(4318),j=t(4129),y=t(8750),b=t(5657),N=t(1751),f=t(1790),v=t(5149),_=t(180),w=t(8699),k=t(9576),q=t(3653),C=t(6262),P=t(2596),S=t(1035),Z=t(9139),F=t(6558),E=t(3190),T=t(7048),$=t(8887);let A=[{value:"stripe",label:"Credit/Debit Card",icon:E.Z},{value:"flutterwave",label:"Bank Transfer & Mobile Money",icon:E.Z}];function CheckoutModal({isOpen:e,onClose:s,listing:t,onOrderSuccess:r}){let[l,n]=(0,i.useState)(!1),[c,d]=(0,i.useState)(1),{user:m}=(0,C.tN)(),{register:x,handleSubmit:p,watch:h,reset:g,formState:{errors:u,isValid:j}}=(0,F.cI)({mode:"onChange",defaultValues:{shipping_name:m?.name||"",shipping_country:"United States",billing_same_as_shipping:!0,payment_method:"stripe",agree_to_terms:!1}}),y=h("billing_same_as_shipping"),b=h(),f=t.price,_=f+0+0,onSubmit=async e=>{if(!m){o.toast.error("Please login to continue");return}n(!0);try{let a={shipping_address:{name:e.shipping_name,address_line_1:e.shipping_address_line_1,address_line_2:e.shipping_address_line_2||"",city:e.shipping_city,state:e.shipping_state,postal_code:e.shipping_postal_code,country:e.shipping_country,phone:e.shipping_phone},payment_method:e.payment_method,notes:e.notes||""};e.billing_same_as_shipping||(a.billing_address={name:e.billing_name||"",address_line_1:e.billing_address_line_1||"",address_line_2:e.billing_address_line_2||"",city:e.billing_city||"",state:e.billing_state||"",postal_code:e.billing_postal_code||"",country:e.billing_country||""});let i=await k.BG.buyListing(t.id,a);if("success"===i.status)o.toast.success("Order placed successfully!"),r(i.data.order_id,i.data.payment_url),g(),s();else throw Error(i.message||"Failed to place order")}catch(e){console.error("Order creation error:",e),o.toast.error(e.message||"Failed to place order. Please try again.")}finally{n(!1)}},handleClose=()=>{l||(g(),d(1),s())};return(0,a.jsx)(P.u,{appear:!0,show:e,as:i.Fragment,children:(0,a.jsxs)(S.V,{as:"div",className:"relative z-50",onClose:handleClose,children:[(0,a.jsx)(P.u.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,a.jsx)("div",{className:"fixed inset-0 bg-black/25 backdrop-blur-sm"})}),(0,a.jsx)("div",{className:"fixed inset-0 overflow-y-auto",children:(0,a.jsx)("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:(0,a.jsx)(P.u.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,a.jsx)(S.V.Panel,{className:"w-full max-w-4xl transform overflow-hidden rounded-2xl bg-white text-left align-middle shadow-xl transition-all",children:(0,a.jsxs)("form",{onSubmit:p(onSubmit),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(S.V.Title,{as:"h3",className:"text-lg font-semibold text-gray-900",children:"Complete Your Purchase"}),(0,a.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["Step ",c," of 3"]})]}),(0,a.jsx)("button",{type:"button",onClick:handleClose,disabled:l,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,a.jsx)(T.Z,{className:"h-6 w-6"})})]}),(0,a.jsx)("div",{className:"px-6 py-3 bg-gray-50",children:(0,a.jsx)("div",{className:"flex items-center",children:[1,2,3].map(e=>(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:`flex items-center justify-center w-8 h-8 rounded-full text-sm font-medium ${c>=e?"bg-primary-600 text-white":"bg-gray-200 text-gray-600"}`,children:e}),(0,a.jsxs)("div",{className:`text-sm ml-2 ${c>=e?"text-primary-600":"text-gray-500"}`,children:[1===e&&"Shipping",2===e&&"Payment",3===e&&"Review"]}),e<3&&(0,a.jsx)("div",{className:`h-0.5 w-16 mx-4 ${c>e?"bg-primary-600":"bg-gray-200"}`})]},e))})}),(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsxs)("div",{className:"flex-1 p-6",children:[1===c&&(0,a.jsxs)(Z.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,a.jsx)($.Z,{className:"h-5 w-5 text-primary-600"}),(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:"Shipping Information"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name *"}),(0,a.jsx)("input",{...x("shipping_name",{required:"Full name is required"}),className:"input-field",placeholder:"Enter your full name"}),u.shipping_name&&(0,a.jsx)("p",{className:"text-red-600 text-sm mt-1",children:u.shipping_name.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number *"}),(0,a.jsx)("input",{...x("shipping_phone",{required:"Phone number is required",pattern:{value:/^[+]?[\d\s\-\(\)]{10,}$/,message:"Invalid phone number"}}),className:"input-field",placeholder:"+1 (555) 123-4567"}),u.shipping_phone&&(0,a.jsx)("p",{className:"text-red-600 text-sm mt-1",children:u.shipping_phone.message})]}),(0,a.jsxs)("div",{className:"md:col-span-2",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address Line 1 *"}),(0,a.jsx)("input",{...x("shipping_address_line_1",{required:"Address is required"}),className:"input-field",placeholder:"Street address, P.O. box, company name"}),u.shipping_address_line_1&&(0,a.jsx)("p",{className:"text-red-600 text-sm mt-1",children:u.shipping_address_line_1.message})]}),(0,a.jsxs)("div",{className:"md:col-span-2",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address Line 2"}),(0,a.jsx)("input",{...x("shipping_address_line_2"),className:"input-field",placeholder:"Apartment, suite, unit, building, floor, etc."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City *"}),(0,a.jsx)("input",{...x("shipping_city",{required:"City is required"}),className:"input-field",placeholder:"Enter city"}),u.shipping_city&&(0,a.jsx)("p",{className:"text-red-600 text-sm mt-1",children:u.shipping_city.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State/Province *"}),(0,a.jsx)("input",{...x("shipping_state",{required:"State is required"}),className:"input-field",placeholder:"Enter state/province"}),u.shipping_state&&(0,a.jsx)("p",{className:"text-red-600 text-sm mt-1",children:u.shipping_state.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Postal Code *"}),(0,a.jsx)("input",{...x("shipping_postal_code",{required:"Postal code is required"}),className:"input-field",placeholder:"Enter postal code"}),u.shipping_postal_code&&(0,a.jsx)("p",{className:"text-red-600 text-sm mt-1",children:u.shipping_postal_code.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Country *"}),(0,a.jsxs)("select",{...x("shipping_country",{required:"Country is required"}),className:"input-field",children:[(0,a.jsx)("option",{value:"United States",children:"United States"}),(0,a.jsx)("option",{value:"Canada",children:"Canada"}),(0,a.jsx)("option",{value:"United Kingdom",children:"United Kingdom"}),(0,a.jsx)("option",{value:"Nigeria",children:"Nigeria"}),(0,a.jsx)("option",{value:"Kenya",children:"Kenya"}),(0,a.jsx)("option",{value:"South Africa",children:"South Africa"}),(0,a.jsx)("option",{value:"Other",children:"Other"})]}),u.shipping_country&&(0,a.jsx)("p",{className:"text-red-600 text-sm mt-1",children:u.shipping_country.message})]})]})]}),2===c&&(0,a.jsxs)(Z.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,a.jsx)(E.Z,{className:"h-5 w-5 text-primary-600"}),(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:"Payment Method"})]}),(0,a.jsx)("div",{className:"space-y-4",children:A.map(e=>(0,a.jsxs)("label",{className:`flex items-center p-4 border rounded-lg cursor-pointer transition-colors ${b.payment_method===e.value?"border-primary-500 bg-primary-50":"border-gray-300 hover:border-gray-400"}`,children:[(0,a.jsx)("input",{type:"radio",...x("payment_method",{required:"Payment method is required"}),value:e.value,className:"sr-only"}),(0,a.jsx)(e.icon,{className:"h-6 w-6 text-gray-400 mr-3"}),(0,a.jsx)("span",{className:"font-medium text-gray-900",children:e.label})]},e.value))}),(0,a.jsxs)("div",{className:"mt-6",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",...x("billing_same_as_shipping"),className:"rounded border-gray-300 text-primary-600 shadow-sm focus:border-primary-500 focus:ring-primary-500"}),(0,a.jsx)("label",{className:"ml-2 text-sm text-gray-900",children:"Billing address same as shipping"})]}),!y&&(0,a.jsxs)("div",{className:"mt-4 p-4 border rounded-lg bg-gray-50",children:[(0,a.jsx)("h5",{className:"font-medium text-gray-900 mb-4",children:"Billing Address"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name *"}),(0,a.jsx)("input",{...x("billing_name",{required:!y&&"Billing name is required"}),className:"input-field",placeholder:"Enter billing name"})]})})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Order Notes (Optional)"}),(0,a.jsx)("textarea",{...x("notes"),rows:3,className:"input-field",placeholder:"Any special instructions or notes for the seller..."})]})]}),3===c&&(0,a.jsxs)(Z.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,a.jsx)(v.Z,{className:"h-5 w-5 text-primary-600"}),(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:"Review Your Order"})]}),(0,a.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(N.Z,{className:"h-4 w-4 text-gray-500"}),(0,a.jsx)("span",{className:"font-medium text-gray-900",children:"Shipping Address"})]}),(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,a.jsx)("p",{children:b.shipping_name}),(0,a.jsx)("p",{children:b.shipping_address_line_1}),b.shipping_address_line_2&&(0,a.jsx)("p",{children:b.shipping_address_line_2}),(0,a.jsxs)("p",{children:[b.shipping_city,", ",b.shipping_state," ",b.shipping_postal_code]}),(0,a.jsx)("p",{children:b.shipping_country}),(0,a.jsxs)("p",{children:["Phone: ",b.shipping_phone]})]})]}),(0,a.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(E.Z,{className:"h-4 w-4 text-gray-500"}),(0,a.jsx)("span",{className:"font-medium text-gray-900",children:"Payment Method"})]}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:A.find(e=>e.value===b.payment_method)?.label})]}),(0,a.jsxs)("div",{className:"flex items-start",children:[(0,a.jsx)("input",{type:"checkbox",...x("agree_to_terms",{required:"You must agree to the terms and conditions"}),className:"mt-1 rounded border-gray-300 text-primary-600 shadow-sm focus:border-primary-500 focus:ring-primary-500"}),(0,a.jsxs)("label",{className:"ml-2 text-sm text-gray-900",children:["I agree to the"," ",(0,a.jsx)("a",{href:"#",className:"text-primary-600 hover:text-primary-700",children:"Terms and Conditions"})," ","and"," ",(0,a.jsx)("a",{href:"#",className:"text-primary-600 hover:text-primary-700",children:"Privacy Policy"})]})]}),u.agree_to_terms&&(0,a.jsx)("p",{className:"text-red-600 text-sm",children:u.agree_to_terms.message})]})]}),(0,a.jsxs)("div",{className:"w-80 bg-gray-50 p-6 border-l",children:[(0,a.jsx)("h4",{className:"font-semibold text-gray-900 mb-4",children:"Order Summary"}),(0,a.jsx)("div",{className:"border rounded-lg p-3 bg-white mb-4",children:(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-gray-200 rounded-lg flex-shrink-0",children:t.images&&t.images[0]&&(0,a.jsx)("img",{src:t.images[0],alt:t.title,className:"w-full h-full object-cover rounded-lg"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h5",{className:"font-medium text-gray-900 truncate",children:t.title}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Sold by ",t.seller_name]}),(0,a.jsx)("p",{className:"font-semibold text-primary-600",children:(0,w.T4)(t.price,t.currency)})]})]})}),(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Item price"}),(0,a.jsx)("span",{className:"text-gray-900",children:(0,w.T4)(f,t.currency)})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Shipping"}),(0,a.jsx)("span",{className:"text-gray-900",children:"Free"})]}),!1,(0,a.jsx)("hr",{}),(0,a.jsxs)("div",{className:"flex justify-between font-semibold text-base",children:[(0,a.jsx)("span",{className:"text-gray-900",children:"Total"}),(0,a.jsx)("span",{className:"text-gray-900",children:(0,w.T4)(_,t.currency)})]})]}),(0,a.jsxs)("div",{className:"mt-6 p-3 bg-green-50 border border-green-200 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(v.Z,{className:"h-4 w-4 text-green-600"}),(0,a.jsx)("span",{className:"text-sm font-medium text-green-800",children:"Secure Transaction"})]}),(0,a.jsx)("p",{className:"text-xs text-green-700 mt-1",children:"Your payment information is encrypted and secure. Funds are held in escrow until order completion."})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-t bg-gray-50",children:[(0,a.jsx)("div",{className:"flex gap-3",children:c>1&&(0,a.jsx)("button",{type:"button",onClick:()=>{c>1&&d(c-1)},className:"btn-secondary",disabled:l,children:"Back"})}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("button",{type:"button",onClick:handleClose,className:"btn-ghost",disabled:l,children:"Cancel"}),c<3?(0,a.jsx)("button",{type:"button",onClick:()=>{c<3&&d(c+1)},className:"btn-primary",disabled:l,children:"Continue"}):(0,a.jsx)("button",{type:"submit",className:"btn-primary px-8",disabled:l||!j,children:l?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"loading-spinner mr-2"}),"Processing..."]}):`Place Order â€¢ ${(0,w.T4)(_,t.currency)}`})]})]})]})})})})})]})})}var O=t(8282);function ListingDetailPage(){let e=(0,r.useParams)(),s=(0,r.useRouter)(),[t,l]=(0,i.useState)(null),[c,P]=(0,i.useState)(!0),[S,Z]=(0,i.useState)(null),[F,E]=(0,i.useState)(0),[T,$]=(0,i.useState)(!1),[A,L]=(0,i.useState)(!1),[M,B]=(0,i.useState)(!1),{user:I,isAuthenticated:G}=(0,q.a)(),{addItem:R}=(0,C.xS)(),U=e.id;(0,i.useEffect)(()=>{U&&fetchListing()},[U]);let fetchListing=async()=>{try{P(!0),Z(null);let e=await k.BG.getListing(parseInt(U));"success"===e.status?l(e.data.listing||e.data):Z(e.message||"Failed to load listing")}catch(e){console.error("Error fetching listing:",e),Z(e.message||"Failed to load listing")}finally{P(!1)}},handleShare=async()=>{if(navigator.share)try{await navigator.share({title:t?.title,text:t?.description,url:window.location.href})}catch(e){console.log("Share cancelled")}else await navigator.clipboard.writeText(window.location.href),o.toast.success("Link copied to clipboard!")};if(c)return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(O.Z,{}),(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"loading-spinner w-8 h-8 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Loading listing..."})]})})]});if(S||!t)return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(O.Z,{}),(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-red-600 mb-4",children:S||"Listing not found"}),(0,a.jsx)(d(),{href:"/marketplace",className:"btn-primary",children:"Back to Marketplace"})]})})]});let V=t.images||[],Y=V.length>1;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(O.Z,{}),(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("div",{className:"bg-white border-b sticky top-0 z-40",children:(0,a.jsx)("div",{className:"container mx-auto px-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("button",{onClick:()=>s.back(),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,a.jsx)(m.Z,{className:"h-6 w-6"})}),(0,a.jsx)("h1",{className:"font-semibold text-gray-900 truncate max-w-md",children:t.title})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>{if(!G){o.toast.error("Please login to save favorites");return}L(!A),o.toast.success(A?"Removed from favorites":"Added to favorites")},className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:A?(0,a.jsx)(_.Z,{className:"h-6 w-6 text-red-500"}):(0,a.jsx)(x.Z,{className:"h-6 w-6"})}),(0,a.jsx)("button",{onClick:handleShare,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,a.jsx)(p.Z,{className:"h-6 w-6"})})]})]})})}),(0,a.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,a.jsxs)("div",{className:"lg:col-span-2",children:[(0,a.jsxs)("div",{className:"bg-white rounded-2xl overflow-hidden shadow-sm",children:[(0,a.jsx)("div",{className:"relative aspect-square bg-gray-100",children:V.length>0?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n(),{src:V[F],alt:t.title,fill:!0,className:"object-cover",priority:!0}),Y&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:()=>{t?.images&&E(e=>0===e?t.images.length-1:e-1)},className:"absolute left-4 top-1/2 -translate-y-1/2 p-2 bg-black/50 text-white rounded-full hover:bg-black/70 transition-colors",children:(0,a.jsx)(h.Z,{className:"h-5 w-5"})}),(0,a.jsx)("button",{onClick:()=>{t?.images&&E(e=>e===t.images.length-1?0:e+1)},className:"absolute right-4 top-1/2 -translate-y-1/2 p-2 bg-black/50 text-white rounded-full hover:bg-black/70 transition-colors",children:(0,a.jsx)(g.Z,{className:"h-5 w-5"})}),(0,a.jsxs)("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 bg-black/50 text-white px-3 py-1 rounded-full text-sm",children:[F+1," / ",V.length]})]}),(0,a.jsx)("div",{className:"absolute top-4 left-4",children:(0,a.jsx)("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${(0,w.xm)(t.condition||"")}`,children:(0,w.B3)(t.condition||"")})})]}):(0,a.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,a.jsxs)("div",{className:"text-center text-gray-400",children:[(0,a.jsx)(u.Z,{className:"h-16 w-16 mx-auto mb-2"}),(0,a.jsx)("p",{children:"No image available"})]})})}),Y&&(0,a.jsx)("div",{className:"p-4 border-t",children:(0,a.jsx)("div",{className:"flex gap-2 overflow-x-auto",children:V.map((e,s)=>(0,a.jsx)("button",{onClick:()=>E(s),className:`flex-shrink-0 w-20 h-20 rounded-lg overflow-hidden border-2 transition-colors ${F===s?"border-primary-500":"border-gray-200 hover:border-gray-300"}`,children:(0,a.jsx)(n(),{src:e,alt:`${t.title} - Image ${s+1}`,width:80,height:80,className:"w-full h-full object-cover"})},s))})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-sm mt-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Description"}),(0,a.jsxs)("div",{className:"prose prose-gray max-w-none",children:[(0,a.jsx)("p",{className:`text-gray-600 leading-relaxed ${M?"":"line-clamp-3"}`,children:t.description}),t.description&&t.description.length>200&&(0,a.jsxs)("button",{onClick:()=>B(!M),className:"inline-flex items-center gap-1 text-primary-600 hover:text-primary-700 mt-2 font-medium",children:[M?"Show less":"Show more",(0,a.jsx)(j.Z,{className:`h-4 w-4 transition-transform ${M?"rotate-180":""}`})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-sm mt-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Seller Information"}),(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center flex-shrink-0",children:(0,a.jsx)(y.Z,{className:"h-6 w-6 text-gray-400"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900",children:t.seller_name}),t.seller_rating&&(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(b.Z,{className:"h-4 w-4 text-yellow-400 fill-current"}),(0,a.jsx)("span",{className:"text-sm text-gray-600",children:t.seller_rating})]})]}),t.seller_location&&(0,a.jsxs)("div",{className:"flex items-center gap-1 text-sm text-gray-600 mb-2",children:[(0,a.jsx)(N.Z,{className:"h-4 w-4"}),t.seller_location]}),(0,a.jsxs)("div",{className:"flex items-center gap-1 text-sm text-gray-600",children:[(0,a.jsx)(f.Z,{className:"h-4 w-4"}),"Member since ",(0,w.p6)(t.created_at)]})]})]}),(0,a.jsxs)("div",{className:"flex gap-3 mt-4",children:[(0,a.jsx)("button",{className:"btn-secondary flex-1",children:"Contact Seller"}),(0,a.jsx)(d(),{href:`/seller/${t.seller_id}`,className:"btn-ghost flex-1 text-center",children:"View Profile"})]})]})]}),(0,a.jsx)("div",{className:"lg:col-span-1",children:(0,a.jsx)("div",{className:"sticky top-24",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-sm",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)("div",{className:"flex items-baseline gap-2 mb-2",children:[(0,a.jsx)("span",{className:"text-3xl font-bold text-gray-900",children:(0,w.T4)(t.price,t.currency)}),t.original_price&&t.original_price>t.price&&(0,a.jsx)("span",{className:"text-lg text-gray-500 line-through",children:(0,w.T4)(t.original_price,t.currency)})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Free shipping included"})]}),(0,a.jsxs)("div",{className:"space-y-3 mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Condition"}),(0,a.jsx)("span",{className:`px-2 py-1 rounded text-xs font-medium ${(0,w.xm)(t.condition||"")}`,children:(0,w.B3)(t.condition||"")})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Category"}),(0,a.jsx)("span",{className:"text-gray-900 capitalize",children:"string"==typeof t.category?t.category:t.category?.name||"Other"})]}),t.location&&(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Location"}),(0,a.jsx)("span",{className:"text-gray-900",children:t.location})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Listed"}),(0,a.jsx)("span",{className:"text-gray-900",children:(0,w.p6)(t.created_at)})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("button",{onClick:()=>{if(!G){o.toast.error("Please login to make a purchase"),s.push("/login");return}$(!0)},className:"btn-primary w-full py-3 text-lg font-semibold",children:"Buy Now"}),(0,a.jsx)("button",{onClick:()=>{if(t){if(!G){o.toast.error("Please login to add items to cart"),s.push("/login");return}R({id:t.id,listing_id:t.id,title:t.title,price:t.price,currency:t.currency,image:t.images?.[0]||"",seller_name:t.seller_name||"Unknown Seller"}),o.toast.success("Added to cart!")}},className:"btn-secondary w-full py-3",children:"Add to Cart"})]}),(0,a.jsx)("div",{className:"mt-6 p-4 bg-green-50 border border-green-200 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(v.Z,{className:"h-5 w-5 text-green-600 flex-shrink-0 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-green-800 mb-1",children:"Secure Purchase"}),(0,a.jsx)("p",{className:"text-sm text-green-700",children:"Your payment is protected with escrow until you confirm receipt of the item."})]})]})}),(0,a.jsxs)("div",{className:"mt-4 space-y-2 text-sm text-gray-600",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{children:"Processing time"}),(0,a.jsx)("span",{children:"1-2 business days"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{children:"Shipping time"}),(0,a.jsx)("span",{children:"3-7 business days"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{children:"Return policy"}),(0,a.jsx)("span",{children:"30 days"})]})]})]})})})]})}),(0,a.jsx)(CheckoutModal,{isOpen:T,onClose:()=>$(!1),listing:t,onOrderSuccess:(e,t)=>{t?window.location.href=t:(o.toast.success("Order placed successfully!"),s.push(`/orders/${e}`))}})]})]})}},5575:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>l,__esModule:()=>r,default:()=>c});var a=t(5153);let i=(0,a.createProxy)(String.raw`c:\wamp64\www\Envisage\frontend\app\marketplace\[id]\page.tsx`),{__esModule:r,$$typeof:l}=i,n=i.default,c=n}};var s=require("../../../webpack-runtime.js");s.C(e);var __webpack_exec__=e=>s(s.s=e),t=s.X(0,[2527,7721,7941,9139,6558,4277,4262,5657,3687,9337,2443,7089,3653,8282,9576,8699],()=>__webpack_exec__(794));module.exports=t})();