"use strict";exports.id=861,exports.ids=[861],exports.modules={861:(e,t,s)=>{s.r(t),s.d(t,{default:()=>SettingsManagement});var a=s(784),l=s(9885),r=s(8551),n=s(345);let i="http://localhost/Envisage/backend/public/api";function SettingsManagement(){let[e,t]=(0,l.useState)({}),[s,c]=(0,l.useState)(!0),[d,o]=(0,l.useState)("general"),[p,g]=(0,l.useState)({}),fetchSettings=async()=>{try{let e=localStorage.getItem("envisage_auth_token"),s=await r.Z.get(`${i}/admin/settings`,{headers:{Authorization:`Bearer ${e}`}});t(s.data.settings)}catch(e){n.toast.error("Failed to load settings")}finally{c(!1)}};(0,l.useEffect)(()=>{fetchSettings()},[]);let handleSaveSettings=async()=>{try{let e=localStorage.getItem("envisage_auth_token"),t=Object.entries(p).map(([e,t])=>({key:e,value:t}));await r.Z.post(`${i}/admin/settings/batch`,{settings:t},{headers:{Authorization:`Bearer ${e}`}}),n.toast.success("Settings updated successfully"),g({}),fetchSettings()}catch(e){n.toast.error("Failed to update settings")}},u=Object.keys(e);return s?(0,a.jsx)("div",{className:"flex justify-center py-8",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"System Settings"}),Object.keys(p).length>0&&(0,a.jsx)("button",{onClick:handleSaveSettings,className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700",children:"Save Changes"})]}),(0,a.jsxs)("div",{className:"flex gap-6",children:[(0,a.jsx)("div",{className:"w-48 bg-white rounded-lg shadow p-4",children:(0,a.jsx)("nav",{className:"space-y-1",children:u.map(e=>(0,a.jsx)("button",{onClick:()=>o(e),className:`w-full text-left px-3 py-2 rounded transition ${d===e?"bg-primary-100 text-primary-700 font-medium":"text-gray-700 hover:bg-gray-100"}`,children:e.charAt(0).toUpperCase()+e.slice(1)},e))})}),(0,a.jsxs)("div",{className:"flex-1 bg-white rounded-lg shadow p-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 capitalize",children:[d," Settings"]}),(0,a.jsx)("div",{className:"space-y-4",children:e[d]?.map(e=>a.jsxs("div",{className:"border-b pb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e.key.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase())}),e.description&&a.jsx("p",{className:"text-xs text-gray-500 mb-2",children:e.description}),"boolean"===e.type?a.jsxs("select",{value:p[e.key]??e.value,onChange:t=>g({...p,[e.key]:t.target.value}),className:"w-full border rounded px-3 py-2",children:[a.jsx("option",{value:"true",children:"Enabled"}),a.jsx("option",{value:"false",children:"Disabled"})]}):"password"===e.type?a.jsx("input",{type:"password",value:p[e.key]??e.value,onChange:t=>g({...p,[e.key]:t.target.value}),className:"w-full border rounded px-3 py-2",placeholder:"Enter value"}):a.jsx("input",{type:"number"===e.type?"number":"text",value:p[e.key]??e.value,onChange:t=>g({...p,[e.key]:t.target.value}),className:"w-full border rounded px-3 py-2"}),a.jsxs("div",{className:"mt-1 flex items-center gap-2 text-xs text-gray-500",children:[a.jsx("span",{className:`px-2 py-0.5 rounded ${e.is_public?"bg-green-100 text-green-700":"bg-gray-100"}`,children:e.is_public?"Public":"Private"}),a.jsxs("span",{children:["Type: ",e.type]})]})]},e.key))})]})]})]})}}};