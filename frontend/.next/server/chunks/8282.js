"use strict";exports.id=8282,exports.ids=[8282],exports.modules={8282:(e,r,t)=>{t.d(r,{Z:()=>Header});var s=t(784),a=t(9885),l=t(1440),i=t.n(l),n=t(7114),o=t(2451),c=t.n(o),d=t(6198),x=t(9329),h=t(8750),g=t(4129),m=t(7048),y=t(6140),p=t(3653),u=t(6262);function Header(){let[e,r]=(0,a.useState)(!1),[t,l]=(0,a.useState)(""),[o,b]=(0,a.useState)(!1),f=(0,a.useRef)(null),v=(0,n.useRouter)(),{user:j,isAuthenticated:N,logout:k,isLoading:C}=(0,p.a)(),{items:w}=(0,u.xS)();(0,a.useEffect)(()=>{function handleClickOutside(e){f.current&&!f.current.contains(e.target)&&b(!1)}if(o)return document.addEventListener("mousedown",handleClickOutside),()=>{document.removeEventListener("mousedown",handleClickOutside)}},[o]);let handleSearch=e=>{e.preventDefault(),t.trim()&&v.push(`/marketplace?search=${encodeURIComponent(t.trim())}`)},handleLogout=async()=>{await k(),b(!1),v.push("/")},S=w.reduce((e,r)=>e+r.quantity,0),L=j?.role||"customer",O=L.charAt(0).toUpperCase()+L.slice(1);return(0,s.jsx)("header",{className:"bg-white border-b border-gray-200 sticky top-0 z-50",children:(0,s.jsxs)("div",{className:"container mx-auto px-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,s.jsx)(i(),{href:"/",className:"flex items-center space-x-2",children:(0,s.jsx)(c(),{src:"/logo.png",alt:"Envisage Technology Zambia",width:150,height:40,style:{width:"auto",height:"40px"},priority:!0})}),(0,s.jsx)("div",{className:"hidden md:flex flex-1 max-w-2xl mx-8",children:(0,s.jsx)("form",{onSubmit:handleSearch,className:"w-full",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:"text",value:t,onChange:e=>l(e.target.value),placeholder:"Search for items...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"}),(0,s.jsx)(d.Z,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"})]})})}),(0,s.jsxs)("div",{className:"hidden md:flex items-center space-x-4",children:[(0,s.jsx)(i(),{href:"/marketplace",className:"text-gray-700 hover:text-gray-900 px-3 py-2 rounded-lg hover:bg-gray-100 transition-colors",children:"Browse"}),(0,s.jsx)(i(),{href:"/sell",className:"text-gray-700 hover:text-gray-900 px-3 py-2 rounded-lg hover:bg-gray-100 transition-colors",children:"Sell"}),(0,s.jsxs)(i(),{href:"/cart",className:"relative p-2 text-gray-700 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors",children:[(0,s.jsx)(x.Z,{className:"h-6 w-6"}),S>0&&(0,s.jsx)("span",{className:"absolute -top-1 -right-1 bg-primary-600 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:S})]}),N?(0,s.jsxs)("div",{className:"relative",ref:f,children:[(0,s.jsxs)("button",{onClick:()=>b(!o),className:"flex items-center space-x-2 text-gray-700 hover:text-gray-900 px-3 py-2 rounded-lg hover:bg-gray-100 transition-colors",children:[(0,s.jsx)(h.Z,{className:"h-6 w-6"}),(0,s.jsxs)("div",{className:"flex flex-col items-start",children:[(0,s.jsx)("span",{className:"text-sm font-medium",children:j?.name}),(0,s.jsx)("span",{className:"text-xs text-gray-500",children:O})]}),(0,s.jsx)(g.Z,{className:"h-4 w-4"})]}),o&&(0,s.jsx)("div",{className:"absolute right-0 mt-1 w-56 bg-white rounded-lg shadow-lg border border-gray-200 z-50",children:(0,s.jsxs)("div",{className:"py-1",children:[(0,s.jsxs)("div",{className:"px-4 py-3 border-b border-gray-100",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-900",children:j?.name}),(0,s.jsx)("p",{className:"text-xs text-gray-500 truncate",children:j?.email}),(0,s.jsx)("span",{className:"inline-block mt-1 px-2 py-1 text-xs font-medium rounded-full bg-primary-100 text-primary-800",children:O})]}),"admin"===L&&(0,s.jsx)(i(),{href:"/admin-panel",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:()=>b(!1),children:"Admin Panel"}),("admin"===L||"seller"===L)&&(0,s.jsx)(i(),{href:"/dashboard",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:()=>b(!1),children:"Dashboard"}),(0,s.jsx)(i(),{href:"/profile",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:()=>b(!1),children:"Profile"}),(0,s.jsx)(i(),{href:"/orders",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:()=>b(!1),children:"My Orders"}),"seller"===L&&(0,s.jsx)(i(),{href:"/listings",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:()=>b(!1),children:"My Listings"}),(0,s.jsx)(i(),{href:"/favorites",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:()=>b(!1),children:"Favorites"}),(0,s.jsx)("hr",{className:"my-1"}),(0,s.jsx)("button",{onClick:handleLogout,className:"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50",children:"Logout"})]})})]}):!C&&(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(i(),{href:"/login",className:"text-gray-700 hover:text-gray-900 px-3 py-2 rounded-lg hover:bg-gray-100 transition-colors",children:"Login"}),(0,s.jsx)(i(),{href:"/register",className:"btn-primary px-4 py-2",children:"Sign Up"})]})]}),(0,s.jsx)("button",{onClick:()=>r(!e),className:"md:hidden p-2 text-gray-700 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors",children:e?(0,s.jsx)(m.Z,{className:"h-6 w-6"}):(0,s.jsx)(y.Z,{className:"h-6 w-6"})})]}),(0,s.jsx)("div",{className:"md:hidden pb-4",children:(0,s.jsx)("form",{onSubmit:handleSearch,children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:"text",value:t,onChange:e=>l(e.target.value),placeholder:"Search for items...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"}),(0,s.jsx)(d.Z,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"})]})})}),e&&(0,s.jsx)("div",{className:"md:hidden border-t border-gray-200 py-4",children:(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(i(),{href:"/marketplace",className:"block px-3 py-2 text-gray-700 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors",onClick:()=>r(!1),children:"Browse"}),(0,s.jsx)(i(),{href:"/sell",className:"block px-3 py-2 text-gray-700 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors",onClick:()=>r(!1),children:"Sell"}),N?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"px-3 py-2 border-b border-gray-200",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-900",children:j?.name}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:j?.email}),(0,s.jsx)("span",{className:"inline-block mt-1 px-2 py-1 text-xs font-medium rounded-full bg-primary-100 text-primary-800",children:O})]}),"admin"===L&&(0,s.jsx)(i(),{href:"/admin-panel",className:"block px-3 py-2 text-gray-700 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors",onClick:()=>r(!1),children:"Admin Panel"}),("admin"===L||"seller"===L)&&(0,s.jsx)(i(),{href:"/dashboard",className:"block px-3 py-2 text-gray-700 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors",onClick:()=>r(!1),children:"Dashboard"}),(0,s.jsx)(i(),{href:"/profile",className:"block px-3 py-2 text-gray-700 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors",onClick:()=>r(!1),children:"Profile"}),(0,s.jsx)(i(),{href:"/orders",className:"block px-3 py-2 text-gray-700 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors",onClick:()=>r(!1),children:"My Orders"}),"seller"===L&&(0,s.jsx)(i(),{href:"/listings",className:"block px-3 py-2 text-gray-700 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors",onClick:()=>r(!1),children:"My Listings"}),(0,s.jsxs)(i(),{href:"/cart",className:"block px-3 py-2 text-gray-700 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors",onClick:()=>r(!1),children:["Cart (",S,")"]}),(0,s.jsx)(i(),{href:"/favorites",className:"block px-3 py-2 text-gray-700 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors",onClick:()=>r(!1),children:"Favorites"}),(0,s.jsx)("button",{onClick:()=>{handleLogout(),r(!1)},className:"block w-full text-left px-3 py-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:"Logout"})]}):!C&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i(),{href:"/login",className:"block px-3 py-2 text-gray-700 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors",onClick:()=>r(!1),children:"Login"}),(0,s.jsx)(i(),{href:"/register",className:"block px-3 py-2 bg-primary-600 text-white hover:bg-primary-700 rounded-lg transition-colors text-center",onClick:()=>r(!1),children:"Sign Up"})]})]})})]})})}},6262:(e,r,t)=>{t.d(r,{tN:()=>l,xS:()=>i});var s=t(9715),a=t(8228);let l=(0,s.Ue)()((0,a.tJ)((e,r)=>({user:null,token:null,isAuthenticated:!1,isLoading:!1,login:(r,t)=>{e({user:r,token:t,isAuthenticated:!0,isLoading:!1})},logout:()=>{e({user:null,token:null,isAuthenticated:!1,isLoading:!1})},setUser:r=>{e({user:r})},setLoading:r=>{e({isLoading:r})}}),{name:"auth-store",partialize:e=>({user:e.user,token:e.token,isAuthenticated:e.isAuthenticated})})),i=(0,s.Ue)()((0,a.tJ)((e,r)=>({items:[],isOpen:!1,addItem:t=>{let s=r().items.find(e=>e.listing_id===t.listing_id);s?e({items:r().items.map(e=>e.listing_id===t.listing_id?{...e,quantity:e.quantity+1}:e)}):e({items:[...r().items,{...t,quantity:1}]})},removeItem:t=>{e({items:r().items.filter(e=>e.listing_id!==t)})},updateQuantity:(t,s)=>{if(s<=0){r().removeItem(t);return}e({items:r().items.map(e=>e.listing_id===t?{...e,quantity:s}:e)})},clearCart:()=>{e({items:[]})},toggleCart:()=>{e({isOpen:!r().isOpen})},getTotalItems:()=>r().items.reduce((e,r)=>e+r.quantity,0),getTotalPrice:()=>r().items.reduce((e,r)=>e+r.price*r.quantity,0)}),{name:"cart-store"}));(0,s.Ue)()((0,a.tJ)((e,r)=>({sidebarOpen:!1,theme:"light",searchQuery:"",filters:{category:"",condition:"",minPrice:null,maxPrice:null,location:"",sortBy:"newest"},setSidebarOpen:r=>{e({sidebarOpen:r})},setTheme:r=>{e({theme:r})},setSearchQuery:r=>{e({searchQuery:r})},setFilters:t=>{e({filters:{...r().filters,...t}})},resetFilters:()=>{e({filters:{category:"",condition:"",minPrice:null,maxPrice:null,location:"",sortBy:"newest"}})}}),{name:"ui-store",partialize:e=>({theme:e.theme,filters:e.filters})}))}};